---
title: 30 ä¸²è”æ‰€æœ‰å•è¯çš„å­ä¸²
order: 32
category:
    - LeetCode
tag:
    - LeetCodeé¢è¯•ç»å…¸150é¢˜
    - LeetCode30
    - å›°éš¾é¢˜
    - æ»‘åŠ¨çª—å£
    - å“ˆå¸Œè¡¨
---

## ğŸš€ ç›¸å…³é“¾æ¥

[LeetCode 30 - ä¸²è”æ‰€æœ‰å•è¯çš„å­ä¸²](https://leetcode.cn/problems/substring-with-concatenation-of-all-words/description/?envType=study-plan-v2&envId=top-interview-150)

## ğŸ“œ æè¿°

ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² `s` å’Œä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ `words`ã€‚`words` ä¸­æ‰€æœ‰å­—ç¬¦ä¸² **é•¿åº¦ç›¸åŒ**ã€‚

`s` ä¸­çš„ **ä¸²è”å­ä¸²** æ˜¯æŒ‡ä¸€ä¸ªåŒ…å« `words` ä¸­æ‰€æœ‰å­—ç¬¦ä¸²ä»¥ä»»æ„é¡ºåºæ’åˆ—è¿æ¥èµ·æ¥çš„å­ä¸²ã€‚

## ğŸ’¡ ç¤ºä¾‹

### ç¤ºä¾‹ 1

- **è¾“å…¥**: `s = "barfoothefoobarman"`, `words = ["foo","bar"]`
- **è¾“å‡º**: `[0,9]`
- **è§£é‡Š**: 
  - å­ä¸² `"barfoo"` å¼€å§‹ä½ç½®æ˜¯ `0`ã€‚å®ƒæ˜¯ `words` ä¸­ä»¥ `["bar","foo"]` é¡ºåºæ’åˆ—çš„è¿æ¥ã€‚
  - å­ä¸² `"foobar"` å¼€å§‹ä½ç½®æ˜¯ `9`ã€‚å®ƒæ˜¯ `words` ä¸­ä»¥ `["foo","bar"]` é¡ºåºæ’åˆ—çš„è¿æ¥ã€‚

### ç¤ºä¾‹ 2

- **è¾“å…¥**: `s = "wordgoodgoodgoodbestword"`, `words = ["word","good","best","word"]`
- **è¾“å‡º**: `[]`
- **è§£é‡Š**: æ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„å­ä¸²ã€‚

### ç¤ºä¾‹ 3

- **è¾“å…¥**: `s = "barfoofoobarthefoobarman"`, `words = ["bar","foo","the"]`
- **è¾“å‡º**: `[6,9,12]`
- **è§£é‡Š**: 
  - å­ä¸² `"foobarthe"` å¼€å§‹ä½ç½®æ˜¯ `6`ã€‚
  - å­ä¸² `"barthefoo"` å¼€å§‹ä½ç½®æ˜¯ `9`ã€‚
  - å­ä¸² `"thefoobar"` å¼€å§‹ä½ç½®æ˜¯ `12`ã€‚

## ğŸ“ æç¤º

- `1 <= s.length <= 10^4`
- `1 <= words.length <= 5000`
- `1 <= words[i].length <= 30`
- `words[i]` å’Œ `s` ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ

## ğŸ’­ æ€è·¯

### æ–¹æ³•ä¸€ï¼šæ»‘åŠ¨çª—å£ + å“ˆå¸Œè¡¨

1. **é¢„å¤„ç†**ï¼š
   - è®¡ç®—æ¯ä¸ªå•è¯çš„é•¿åº¦ `wordLen` å’Œæ‰€æœ‰å•è¯è¿æ¥åçš„æ€»é•¿åº¦ `groupLen`ã€‚
   - å¦‚æœ `s` çš„é•¿åº¦å°äº `groupLen`ï¼Œç›´æ¥è¿”å›ç©ºåˆ—è¡¨ã€‚

2. **æ»‘åŠ¨çª—å£**ï¼š
   - ä½¿ç”¨æ»‘åŠ¨çª—å£åœ¨ `s` ä¸Šæ»‘åŠ¨ï¼Œçª—å£å¤§å°ä¸º `groupLen`ã€‚
   - å¯¹äºæ¯ä¸ªçª—å£ï¼Œç»Ÿè®¡çª—å£å†…å•è¯å‡ºç°çš„é¢‘ç‡ï¼Œå¹¶ä¸ `words` çš„é¢‘ç‡è¿›è¡Œæ¯”è¾ƒã€‚
   - å…·ä½“å®ç°ä¸ºä½¿ç”¨ä¸€ä¸ªå“ˆå¸Œè¡¨ï¼Œkeyä¸ºå•è¯ï¼Œç”¨wordsæ•°ç»„è¿›è¡Œåˆå§‹åŒ–ï¼Œwordsæ•°ç»„æ¯å‡ºç°ä¸€æ¬¡å°±å‡1ï¼Œçª—å£å†…å‡ºç°ä¸€æ¬¡å°±åŠ 1ï¼Œè‹¥è¯¥çª—å£ä½¿hashmapä¸­çš„å€¼å…¨ä¸º0ï¼Œåˆ™è¯¥çª—å£èµ·å§‹ä½ç½®ä¸º1ä¸ªç­”æ¡ˆã€‚

## ğŸ’» ä»£ç å®ç°

```java
public List<Integer> findSubstring(String s, String[] words) {
    int wordLen = words[0].length();
    int groupLen = wordLen * words.length;
    if (s.length() < groupLen) {
        return Collections.emptyList();
    }
    List<Integer> ans = new ArrayList<>();
    for (int i = 0; i < wordLen; i++) {
        Map<String, Integer> map = new HashMap<>();
        for (String word : words) {
            int val = map.getOrDefault(word, 0);
            map.put(word, val - 1);
        }
        int left = i, r = left + groupLen - 1;
        while (r < s.length()) {
            String subStr = s.substring(left, r + 1);
            if (left == i) {
                for (int j = 0; j < subStr.length(); j += wordLen) {
                    String word = subStr.substring(j, j + wordLen);
                    if (map.containsKey(word)) {
                        map.put(word, map.get(word) + 1);
                    }
                }
            } else {
                String formerWord = s.substring(left - wordLen, left);
                String newWord = s.substring(left + groupLen - wordLen, left + groupLen);
                if (map.containsKey(formerWord)) {
                    map.put(formerWord, map.get(formerWord) - 1);
                }
                if (map.containsKey(newWord)) {
                    map.put(newWord, map.get(newWord) + 1);
                }
            }
            if (map.values().stream().allMatch(v -> v == 0)) {
                ans.add(left);
            }
            left += wordLen;
            r = left + groupLen - 1;
        }
    }
    return ans;
}
```