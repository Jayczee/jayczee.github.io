import{_ as k}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as e,b as a,d as i,e as n,f as h,a as l,r as p,o as r}from"./app-ZnJeIUiK.js";const d={};function g(y,s){const t=p("RouteLink");return r(),e("div",null,[s[10]||(s[10]=a("p",null,[i("Certbot 是一个 "),a("strong",null,"开源工具"),i("，用于自动化获取和管理 "),a("strong",null,"SSL/TLS 证书"),i("，主要与 "),a("strong",null,"Let's Encrypt"),i(" 配合使用。它简化了 HTTPS 加密的配置过程，使网站管理员能够轻松为他们的网站启用安全连接。Certbot 能够自动续订证书，减少手动操作的需要，从而提高安全性和便利性。它支持多种操作系统和 Web 服务器，用户只需通过命令行界面进行简单的配置即可。")],-1)),s[11]||(s[11]=a("h2",{id:"动态-dns-解析",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#动态-dns-解析"},[a("span",null,"动态 DNS 解析")])],-1)),a("p",null,[s[1]||(s[1]=i("在上一篇 ")),n(t,{to:"/nas/basic/3-ddns-go.html"},{default:h(()=>s[0]||(s[0]=[i("DDNS-GO")])),_:1}),s[2]||(s[2]=i(" 中，已经配置了动态 DNS 解析，实现了将域名与 NAS 的动态公网 IP 进行绑定。访问 NAS 上的服务大多数情况下都是通过 Web 进行的，因此使用 HTTPS 进行安全加密是非常重要的。而且某些互联网服务限制必须使用 HTTPS URL 才能使用（例如对接国外电商平台时填写的 webhook URL）。"))]),s[12]||(s[12]=l('<p>国内各大云服务商都有付费证书的选项，但对于个人 NAS 使用，免费的 <strong>Let&#39;s Encrypt</strong> 签发的证书即可满足需求。</p><h3 id="域名服务商配置" tabindex="-1"><a class="header-anchor" href="#域名服务商配置"><span>域名服务商配置</span></a></h3><ul><li>若域名服务商是 <strong>阿里云</strong>，可以参考项目 <a href="https://github.com/justjavac/certbot-dns-aliyun" target="_blank" rel="noopener noreferrer">certbot-dns-aliyun</a> 进行实现。</li><li>若域名服务商不是阿里云，则需要寻找 <code>certbot-dns-</code> 对应服务商的插件，每个服务商的认证流程都不一样。</li></ul>',3)),a("p",null,[s[4]||(s[4]=i("该插件的作用在于协助 Certbot 认证该域名是否在名下。以阿里云插件为例，根据上述 GitHub 项目文档配置完阿里云插件后，会要求填写账号的 ")),s[5]||(s[5]=a("strong",null,"Access Key",-1)),s[6]||(s[6]=i(" 和 ")),s[7]||(s[7]=a("strong",null,"Access Token",-1)),s[8]||(s[8]=i("（具体申请步骤参考 ")),n(t,{to:"/nas/basic/3-ddns-go.md/#%E9%85%8D%E7%BD%AEddns-go"},{default:h(()=>s[3]||(s[3]=[i("配置 DDNS-GO")])),_:1}),s[9]||(s[9]=i("）。"))]),s[13]||(s[13]=l(`<p>若不想使用插件，可以使用 <strong>dns-01</strong> 认证来完成该流程，从而申请到证书，步骤如下。</p><h2 id="安装-certbot" tabindex="-1"><a class="header-anchor" href="#安装-certbot"><span>安装 Certbot</span></a></h2><h3 id="使用-apt-安装-certbot" tabindex="-1"><a class="header-anchor" href="#使用-apt-安装-certbot"><span>使用 apt 安装 Certbot</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> certbot</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="运行申请命令" tabindex="-1"><a class="header-anchor" href="#运行申请命令"><span>运行申请命令</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">certbot</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> certonly</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;*.example.com&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --manual</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --preferred-challenges</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dns-01</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 改成自己的域名</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><code>certbot certonly</code>：表示仅获取证书，不自动配置 Web 服务器。</li><li><code>-d &quot;*.example.com&quot;</code>：表示申请一个通配符证书，适用于所有子域名。</li><li><code>--manual</code>：表示手动验证域名所有权。</li><li><code>--preferred-challenges dns-01</code>：指定使用 DNS-01 挑战方式进行域名验证。</li></ul><h3 id="结果示例" tabindex="-1"><a class="header-anchor" href="#结果示例"><span>结果示例</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># certbot certonly -d &quot;*.example.com&quot; -d example.com --manual --preferred-challenges dns-01</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Saving</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> debug</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> log</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/letsencrypt/log/letsencrypt.log</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">It</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> contains</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> these</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> names:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> example.com</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Please</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> deploy</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> DNS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> TXT</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> record</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> under</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> name:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">_acme-challenge.******.com.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">with</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> following</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> value:</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">obhvT0vzlPQANt0XsCHj5xGOj2YUacKnlprinGpfwCg</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Before</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> continuing,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> verify</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> TXT</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> record</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> has</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> been</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> deployed.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Depending</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> on</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> DNS</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">provider,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> this</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> may</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> take</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> some</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> time,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> from</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> few</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> seconds</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> multiple</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> minutes.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> You</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> can</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> check</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> if</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> it</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> has</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> finished</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> deploying</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> with</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> aid</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> of</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> online</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tools,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> such</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> as</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Google</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Admin</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Toolbox:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://toolbox.googleapps.com/apps/dig/#TXT/_acme-challenge.diaoan.xyz.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Look</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> for</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> one</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> or</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> more</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bolded</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> line</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">s</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">below</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> line</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ANSWER.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> It</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> should</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> show</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> the</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">value(s</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) you ve just added.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">***Press Enter to Continue***</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>根据上述结果，需要在域名服务商处添加一条 <strong>TXT</strong> 类型的解析记录，并且值为 Certbot 给出的值。<strong>添加完后再按 Enter 继续</strong>，之后 Certbot 会验证是否存在该解析记录，若验证成功，Certbot 会继续创建证书。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Successfully</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> received</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> certificate.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Certificate</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> is</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> saved</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> at:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/letsencrypt/live/</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">******</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/fullchain.pem</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Key</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> is</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> saved</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> at:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         /etc/letsencrypt/live/</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">******</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/privkey.pem</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">This</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> certificate</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> expires</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> on</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 2025-4-13.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">These</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> files</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> will</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> be</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> updated</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> when</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> certificate</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> renews.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">NEXT</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> STEPS:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">This</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> certificate</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> will</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> not</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> be</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> renewed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> automatically.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Autorenewal</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> of</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --manual</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> certificates</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> requires</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> use</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> of</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> an</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> authentication</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> hook</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> script</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (--manual-auth-hook) but one was not provided. To renew this certificate, repeat this same certbot command before the certificate</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;s expiry date.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>证书创建完成并保存到了对应目录。</p><h2 id="提示" tabindex="-1"><a class="header-anchor" href="#提示"><span>提示</span></a></h2><div class="hint-container tip"><p class="hint-container-title">提示</p><p><strong>DNS-01</strong> 是一种用于域名所有权验证的挑战类型。在使用 SSL 证书申请时，证书颁发机构需要确认申请者对域名的控制权。DNS-01 挑战的具体步骤如下：</p><ol><li><strong>生成挑战</strong>：请求证书时，证书颁发机构会生成一个特定的挑战字符串。</li><li><strong>添加 DNS 记录</strong>：在 DNS 管理界面中添加一条 <strong>TXT</strong> 记录，记录的名称通常是 <code>_acme-challenge</code>，内容为颁发机构提供的挑战字符串。</li><li><strong>等待 DNS 传播</strong>：添加记录后，可能需要一些时间让 DNS 记录传播。</li><li><strong>验证</strong>：证书颁发机构会查询 DNS 记录，检查是否存在正确的 <strong>TXT</strong> 记录。如果存在且内容匹配，则证明对该域名的控制权。</li><li><strong>颁发证书</strong>：验证通过后，颁发机构将颁发 SSL 证书。</li></ol></div><p><strong>DNS-01</strong> 挑战的优点是可以用于申请通配符证书，而其他验证方式（如 <strong>HTTP-01</strong>）则无法实现这一点。</p><h2 id="证书续期" tabindex="-1"><a class="header-anchor" href="#证书续期"><span>证书续期</span></a></h2><p>证书即将到期时重新运行上述命令即可，会重新申请 3 个月期的新证书，不再需要中间步骤。因此也可以将申请命令加入 <strong>crontab</strong>，每 80 天自动运行一次，即可实现自动续期。</p>`,17))])}const A=k(d,[["render",g],["__file","4-certbot.html.vue"]]),C=JSON.parse(`{"path":"/nas/basic/4-certbot.html","title":"Certbot 自动获取HTTPS证书","lang":"zh-CN","frontmatter":{"title":"Certbot 自动获取HTTPS证书","order":4,"category":["certbot","docker","教程"],"description":"Certbot 是一个 开源工具，用于自动化获取和管理 SSL/TLS 证书，主要与 Let's Encrypt 配合使用。它简化了 HTTPS 加密的配置过程，使网站管理员能够轻松为他们的网站启用安全连接。Certbot 能够自动续订证书，减少手动操作的需要，从而提高安全性和便利性。它支持多种操作系统和 Web 服务器，用户只需通过命令行界面进行简单...","head":[["meta",{"property":"og:url","content":"https://jayczee.github.io/nas/basic/4-certbot.html"}],["meta",{"property":"og:site_name","content":"Jayczee's Blog"}],["meta",{"property":"og:title","content":"Certbot 自动获取HTTPS证书"}],["meta",{"property":"og:description","content":"Certbot 是一个 开源工具，用于自动化获取和管理 SSL/TLS 证书，主要与 Let's Encrypt 配合使用。它简化了 HTTPS 加密的配置过程，使网站管理员能够轻松为他们的网站启用安全连接。Certbot 能够自动续订证书，减少手动操作的需要，从而提高安全性和便利性。它支持多种操作系统和 Web 服务器，用户只需通过命令行界面进行简单..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-01-13T08:40:35.000Z"}],["meta",{"property":"article:modified_time","content":"2025-01-13T08:40:35.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Certbot 自动获取HTTPS证书\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-01-13T08:40:35.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Jayczee\\",\\"url\\":\\"https://jayczee.github.io\\"}]}"]]},"headers":[{"level":2,"title":"动态 DNS 解析","slug":"动态-dns-解析","link":"#动态-dns-解析","children":[{"level":3,"title":"域名服务商配置","slug":"域名服务商配置","link":"#域名服务商配置","children":[]}]},{"level":2,"title":"安装 Certbot","slug":"安装-certbot","link":"#安装-certbot","children":[{"level":3,"title":"使用 apt 安装 Certbot","slug":"使用-apt-安装-certbot","link":"#使用-apt-安装-certbot","children":[]},{"level":3,"title":"运行申请命令","slug":"运行申请命令","link":"#运行申请命令","children":[]},{"level":3,"title":"结果示例","slug":"结果示例","link":"#结果示例","children":[]}]},{"level":2,"title":"提示","slug":"提示","link":"#提示","children":[]},{"level":2,"title":"证书续期","slug":"证书续期","link":"#证书续期","children":[]}],"git":{"createdTime":1736491706000,"updatedTime":1736757635000,"contributors":[{"name":"Jayczee","username":"Jayczee","email":"jayczee@yeah.net","commits":4,"url":"https://github.com/Jayczee"}]},"readingTime":{"minutes":4.05,"words":1216},"filePathRelative":"nas/basic/4-certbot.md","localizedDate":"2025年1月10日","excerpt":"<p>Certbot 是一个 <strong>开源工具</strong>，用于自动化获取和管理 <strong>SSL/TLS 证书</strong>，主要与 <strong>Let's Encrypt</strong> 配合使用。它简化了 HTTPS 加密的配置过程，使网站管理员能够轻松为他们的网站启用安全连接。Certbot 能够自动续订证书，减少手动操作的需要，从而提高安全性和便利性。它支持多种操作系统和 Web 服务器，用户只需通过命令行界面进行简单的配置即可。</p>\\n<h2>动态 DNS 解析</h2>\\n<p>在上一篇 <a href=\\"/nas/basic/3-ddns-go.html\\" target=\\"_blank\\">DDNS-GO</a> 中，已经配置了动态 DNS 解析，实现了将域名与 NAS 的动态公网 IP 进行绑定。访问 NAS 上的服务大多数情况下都是通过 Web 进行的，因此使用 HTTPS 进行安全加密是非常重要的。而且某些互联网服务限制必须使用 HTTPS URL 才能使用（例如对接国外电商平台时填写的 webhook URL）。</p>","autoDesc":true}`);export{A as comp,C as data};
