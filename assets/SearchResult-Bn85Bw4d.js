import{f as N,u as X,g as T,h as Z,j as ee,t as te,i as le,k as R,l as w,m as l,n as ae,p as se,s as ne,R as L,q as oe,v as ie,x as re,y as ce,z as ue,A as j,B as I,D as me,C as ge,E as he,F as de,G as ve,H as Ee,I as ye,J as pe,K as M,L as Ae,M as f}from"./app-BVPWqcHm.js";const Be=["/","/code/cc-codex.html","/code/fedex-crawler.html","/code/label-trk-reader.html","/code/move-2-wsl.html","/etc/file-deleted-by-mac.html","/etc/journal-to-japan.html","/nas/","/nas/jellyfin-encode-decode.html","/nas/jellyfin-font.html","/nas/qbit-category.html","/note/min-na-no-ni-hon-go.html","/note/mysql.html","/win_linux/docker-proxy.html","/win_linux/link.html","/win_linux/linux-win-alias.html","/win_linux/mac-code-block.html","/win_linux/ollama.html","/win_linux/openclash.html","/win_linux/sangfor-uninstall.html","/win_linux/try-wake-on-lan.html","/win_linux/win11xlite-winlogo-pic.html","/nas/basic/1-docker.html","/nas/basic/10-movie-pilot.html","/nas/basic/2-portainer.html","/nas/basic/3-ddns-go.html","/nas/basic/4-certbot.html","/nas/basic/5-nginx.html","/nas/basic/6-samba.html","/nas/basic/7-qbittorrent.html","/nas/basic/8-jellyfin.html","/nas/basic/9-v2rayn.html","/nas/optional/alist.html","/nas/optional/beszel.html","/nas/optional/gpt.html","/nas/optional/teamspeak.html","/note/leet150/1-leet088.html","/note/leet150/10-leet045.html","/note/leet150/11-leet274.html","/note/leet150/12-leet380.html","/note/leet150/13-leet238.html","/note/leet150/14-leet134.html","/note/leet150/15-leet135.html","/note/leet150/16-leet042.html","/note/leet150/17-leet013.html","/note/leet150/18-leet012.html","/note/leet150/19-leet058.html","/note/leet150/2-leet027.html","/note/leet150/20-leet014.html","/note/leet150/21-leet151.html","/note/leet150/22-leet006.html","/note/leet150/23-leet028.html","/note/leet150/24-leet068.html","/note/leet150/25-leet125.html","/note/leet150/26-leet329.html","/note/leet150/27-leet169.html","/note/leet150/28-leet011.html","/note/leet150/29-leet015.html","/note/leet150/3-leet026.html","/note/leet150/30-leet209.html","/note/leet150/31-leet003.html","/note/leet150/32-leet030.html","/note/leet150/4-leet080.html","/note/leet150/5-leet169.html","/note/leet150/6-leet189.html","/note/leet150/7-leet121.html","/note/leet150/8-leet122.html","/note/leet150/9-leet055.html","/note/ni-hon-go-grammar/p001.html","/note/ni-hon-go-grammar/p002.html","/note/ni-hon-go-grammar/p003.html","/note/ni-hon-go-grammar/p004.html","/404.html","/code/","/etc/","/note/","/win_linux/","/nas/basic/","/nas/optional/","/note/leet150/","/note/ni-hon-go-grammar/","/category/","/category/code/","/category/other/","/category/nas/","/category/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","/category/linux/","/category/windows/","/category/openclash/","/category/leetcode/","/tag/","/tag/ai/","/tag/codex/","/tag/claude-code/","/tag/%E7%88%AC%E8%99%AB/","/tag/fedex/","/tag/python/","/tag/java/","/tag/wsl2/","/tag/mac/","/tag/icloud/","/tag/%E6%97%A5%E6%9C%AC/","/tag/%E6%97%85%E6%B8%B8/","/tag/%E6%94%BB%E7%95%A5/","/tag/jellyfin/","/tag/%E7%BC%96%E7%A0%81%E4%B8%8E%E8%A7%A3%E7%A0%81/","/tag/%E5%AD%97%E4%BD%93%E4%B9%B1%E7%A0%81/","/tag/qbittorrent/","/tag/%E6%97%A5%E6%9C%AC%E8%AA%9E/","/tag/mysql/","/tag/docker/","/tag/proxy/","/tag/%E7%A1%AC%E9%93%BE%E6%8E%A5/","/tag/%E8%BD%AF%E9%93%BE%E6%8E%A5/","/tag/shell/","/tag/alias/","/tag/vuepress/","/tag/ollama/","/tag/openwrt/","/tag/openclash/","/tag/sangfor/","/tag/wakeonlan/","/tag/win11xlite/","/tag/movie-pilot/","/tag/portainer/","/tag/ddns-go/","/tag/certbot/","/tag/nginx/","/tag/samba/","/tag/v2ray/","/tag/v2raya/","/tag/%E4%BB%A3%E7%90%86/","/tag/alist/","/tag/beszel/","/tag/chatgpt/","/tag/openai/","/tag/teamspeak/","/tag/leetcode%E9%9D%A2%E8%AF%95%E7%BB%8F%E5%85%B8150%E9%A2%98/","/tag/leetcode88/","/tag/%E7%AE%80%E5%8D%95%E9%A2%98/","/tag/%E6%95%B0%E7%BB%84/","/tag/%E5%8F%8C%E6%8C%87%E9%92%88/","/tag/%E6%8E%92%E5%BA%8F/","/tag/leetcode045/","/tag/%E4%B8%AD%E7%AD%89%E9%A2%98/","/tag/%E8%B4%AA%E5%BF%83/","/tag/leetcode274/","/tag/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/","/tag/leetcode380/","/tag/leetcode238/","/tag/leetcode134/","/tag/leetcode135/","/tag/%E5%9B%B0%E9%9A%BE%E9%A2%98/","/tag/leetcode042/","/tag/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/","/tag/leetcode013/","/tag/%E5%AD%97%E7%AC%A6%E4%B8%B2/","/tag/leetcode012/","/tag/leetcode058/","/tag/leetcode27/","/tag/%E5%BF%AB%E6%85%A2%E6%8C%87%E9%92%88/","/tag/leetcode14/","/tag/leetcode151/","/tag/leetcode6/","/tag/leetcode28/","/tag/kmp/","/tag/leetcode68/","/tag/leetcode125/","/tag/leetcode329/","/tag/leetcode167/","/tag/leetcode11/","/tag/leetcode15/","/tag/leetcode26/","/tag/leetcode209/","/tag/%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3/","/tag/leetcode3/","/tag/leetcode30/","/tag/%E5%93%88%E5%B8%8C%E8%A1%A8/","/tag/leetcode169/","/tag/%E8%AE%A1%E6%95%B0/","/tag/leetcode121/","/tag/leetcode122/","/tag/leetcode055/","/tag/0-n1%E8%AF%AD%E6%B3%95/","/article/","/star/","/timeline/"],xe="SLIMSEARCH_QUERY_HISTORY",E=M(xe,[]),we=()=>{const{queryHistoryCount:s}=f;return{enabled:s>0,queryHistories:E,addQueryHistory:i=>{E.value=Array.from(new Set([i,...E.value.slice(0,s-1)]))},removeQueryHistory:i=>{E.value=[...E.value.slice(0,i),...E.value.slice(i+1)]}}},F=s=>Be[s.id]+("anchor"in s?`#${s.anchor}`:""),fe="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:$}=f,y=M(fe,[]),be=()=>({enabled:$>0,resultHistories:y,addResultHistory:o=>{{const i={link:F(o),display:o.display};"header"in o&&(i.header=o.header),y.value=[i,...y.value.slice(0,$-1)]}},removeResultHistory:o=>{y.value=[...y.value.slice(0,o),...y.value.slice(o+1)]}}),ke=s=>{const o=me(),i=T(),b=ge(),r=R(0),p=w(()=>r.value>0),m=he([]);return de(()=>{const{search:k,terminate:h}=ve(),A=ye(d=>{const{resultsFilter:C=a=>a,querySplitter:v,suggestionsFilter:Q,...n}=o.value;d?(r.value+=1,k(d,i.value,n).then(a=>C(a,d,i.value,b.value)).then(a=>{r.value-=1,m.value=a}).catch(a=>{console.warn(a),r.value-=1,r.value||(m.value=[])})):m.value=[]},f.searchDelay-f.suggestDelay,{maxWait:5e3});Ee([s,i],([d])=>A(d.join(" "))),pe(()=>{h()})}),{isSearching:p,results:m}};var He=N({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(s,{emit:o}){const i=X(),b=T(),r=Z(ee),{addQueryHistory:p,queryHistories:m,removeQueryHistory:k}=we(),{resultHistories:h,addResultHistory:A,removeResultHistory:d}=be(),C=te(s,"queries"),{results:v,isSearching:Q}=ke(C),n=le({isQuery:!0,index:0}),a=R(0),g=R(0),S=w(()=>m.value.length>0||h.value.length>0),H=w(()=>v.value.length>0),q=w(()=>v.value[a.value]||null),U=()=>{const{isQuery:e,index:t}=n;t===0?(n.isQuery=!e,n.index=e?h.value.length-1:m.value.length-1):n.index=t-1},z=()=>{const{isQuery:e,index:t}=n;t===(e?m.value.length-1:h.value.length-1)?(n.isQuery=!e,n.index=0):n.index=t+1},O=()=>{a.value=a.value>0?a.value-1:v.value.length-1,g.value=q.value.contents.length-1},P=()=>{a.value=a.value<v.value.length-1?a.value+1:0,g.value=0},Y=()=>{g.value<q.value.contents.length-1?g.value+=1:P()},G=()=>{g.value>0?g.value-=1:O()},D=e=>e.map(t=>Ae(t)?t:l(t[0],t[1])),J=e=>{if(e.type==="customField"){const t=ce[e.index]||"$content",[c,x=""]=ue(t)?t[b.value].split("$content"):t.split("$content");return e.display.map(u=>l("div",D([c,...u,x])))}return e.display.map(t=>l("div",D(t)))},B=()=>{a.value=0,g.value=0,o("updateQuery",""),o("close")},K=()=>l("ul",{class:"slimsearch-result-list"},l("li",{class:"slimsearch-result-list-item"},[l("div",{class:"slimsearch-result-title"},r.value.queryHistory),m.value.map((e,t)=>l("div",{class:["slimsearch-result-item",{active:n.isQuery&&n.index===t}],onClick:()=>{o("updateQuery",e)}},[l(j,{class:"slimsearch-result-type"}),l("div",{class:"slimsearch-result-content"},e),l("button",{class:"slimsearch-remove-icon",innerHTML:I,onClick:c=>{c.preventDefault(),c.stopPropagation(),k(t)}})]))])),V=()=>l("ul",{class:"slimsearch-result-list"},l("li",{class:"slimsearch-result-list-item"},[l("div",{class:"slimsearch-result-title"},r.value.resultHistory),h.value.map((e,t)=>l(L,{to:e.link,class:["slimsearch-result-item",{active:!n.isQuery&&n.index===t}],onClick:()=>{B()}},()=>[l(j,{class:"slimsearch-result-type"}),l("div",{class:"slimsearch-result-content"},[e.header?l("div",{class:"content-header"},e.header):null,l("div",e.display.map(c=>D(c)).flat())]),l("button",{class:"slimsearch-remove-icon",innerHTML:I,onClick:c=>{c.preventDefault(),c.stopPropagation(),d(t)}})]))]));return ae("keydown",e=>{if(s.isFocusing){if(H.value){if(e.key==="ArrowUp")G();else if(e.key==="ArrowDown")Y();else if(e.key==="Enter"){const t=q.value.contents[g.value];p(s.queries.join(" ")),A(t),i.push(F(t)),B()}}else if(e.key==="ArrowUp")U();else if(e.key==="ArrowDown")z();else if(e.key==="Enter"){const{index:t}=n;n.isQuery?(o("updateQuery",m.value[t]),e.preventDefault()):(i.push(h.value[t].link),B())}}}),se([a,g],()=>{var e;(e=document.querySelector(".slimsearch-result-list-item.active .slimsearch-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>l("div",{class:["slimsearch-result-wrapper",{empty:s.queries.length?!H.value:!S.value}],id:"slimsearch-results"},s.queries.length?Q.value?l(ne,{hint:r.value.searching}):H.value?l("ul",{class:"slimsearch-result-list"},v.value.map(({title:e,contents:t},c)=>{const x=a.value===c;return l("li",{class:["slimsearch-result-list-item",{active:x}]},[l("div",{class:"slimsearch-result-title"},e||r.value.defaultTitle),t.map((u,W)=>{const _=x&&g.value===W;return l(L,{to:F(u),class:["slimsearch-result-item",{active:_,"aria-selected":_}],onClick:()=>{p(s.queries.join(" ")),A(u),B()}},()=>[u.type==="text"?null:l(u.type==="title"?oe:u.type==="heading"?ie:re,{class:"slimsearch-result-type"}),l("div",{class:"slimsearch-result-content"},[u.type==="text"&&u.header?l("div",{class:"content-header"},u.header):null,l("div",J(u))])])})])})):r.value.emptyResult:S.value?[K(),V()]:r.value.emptyHistory)}});export{He as default};
