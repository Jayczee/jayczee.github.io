import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as l,o as n}from"./app-zBRQK9WP.js";const t={};function o(p,s){return n(),a("div",null,s[0]||(s[0]=[l(`<h2 id="动机" tabindex="-1"><a class="header-anchor" href="#动机"><span>动机</span></a></h2><p>最近使用Codex开发的时候，发现Codex在检索文件这一步经常报错<code>找不到命令</code>，而后尝试使用python读取文件内容。但是在我朋友的机器上它尝试调用python也会出现失败的情况，猜测可能是因为环境差异：我本机确实有python环境而朋友的电脑没有。</p><p>其次，安装CC和Codex时，两者都有提示推荐使用WSL2，体验效果更好。但是没有明说<strong>好在哪里</strong>。</p><p>在我的Mac上使用两个ai agent确实表现要更好，没有这样的提示，但无奈我的Mac是小规格，只有8G内存，无法同时开过多的项目。</p><p>WSL2与Windows目前的适配非常棒。</p><p>综上，下定决心，在Windows上安装wsl2并将代码迁移进去。</p><h2 id="安装wsl2" tabindex="-1"><a class="header-anchor" href="#安装wsl2"><span>安装WSL2</span></a></h2><p>我比较喜欢Debian系统，所以wsl2中安装的也是debian。</p><p>安装命令：</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" data-title="bash" style="background-color:#1E1E1E;color:#D4D4D4;"><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#DCDCAA;">wsl</span><span style="color:#569CD6;"> --install</span><span style="color:#569CD6;"> -d</span><span style="color:#CE9178;"> Debian</span></span></code></pre></div><p>此处建议挂个🪜，该命令会从github拉取文件信息。</p><p>wsl中安装的linux发行版似乎并非完全体，我下载的非常快，30s就下载安装完毕，直接可以启动了。</p><p>检查wsl版本，确定版本是wsl2（在windows命令行中运行）：</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" data-title="bash" style="background-color:#1E1E1E;color:#D4D4D4;"><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#DCDCAA;">wsl</span><span style="color:#569CD6;"> -l</span><span style="color:#569CD6;"> -v</span></span></code></pre></div><h2 id="安装过程中检索ai的一些问题" tabindex="-1"><a class="header-anchor" href="#安装过程中检索ai的一些问题"><span>安装过程中检索AI的一些问题</span></a></h2><ul><li><p>Q：wsl2可以使用宿主机的目录吗？</p><ul><li><p>A：Windows 的盘会自动挂载在 /mnt 下，例如：</p><table><thead><tr><th style="text-align:left;">Windows 路径</th><th style="text-align:left;">在 WSL2 中路径</th></tr></thead><tbody><tr><td style="text-align:left;"><code>C:\\</code></td><td style="text-align:left;"><code>/mnt/c/</code></td></tr><tr><td style="text-align:left;"><code>D:\\</code></td><td style="text-align:left;"><code>/mnt/d/</code></td></tr></tbody></table><p>虽然可以互通目录，但是不建议跨系统访问文件，在后续在<code>npm install</code>、<code>build</code>等安装依赖和构建行为中会非常慢。</p></li></ul></li><li><p>Q：宿主机是游戏主力主机，需要打一些高配置竞技游戏，安装wsl2是否会影响我的游戏性能？</p><ul><li>A：wsl2会动态分配资源，并非像传统虚拟机和wsl1一样直接占用定量的资源。空闲不使用时不会占用CPU和GPU。且wsl2 的 GPU 访问是独立的接口，不会影响Windows中的驱动。</li></ul></li></ul><p>在玩游戏前可执行命令来关闭wsl：</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" data-title="bash" style="background-color:#1E1E1E;color:#D4D4D4;"><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#DCDCAA;">wsl</span><span style="color:#569CD6;"> --shutdown</span></span></code></pre></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>在宿主机windows中可以在命令行中运行：</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" data-title="bash" style="background-color:#1E1E1E;color:#D4D4D4;"><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#DCDCAA;">wsl</span><span style="color:#D4D4D4;"> &lt;</span><span style="color:#CE9178;">具体命</span><span style="color:#D4D4D4;">令&gt;</span></span></code></pre></div><p>通过以上方法可以直接从windows中调用wsl环境下的命令，不用每次都单独进入运行wsl的cmd会话框。</p></div><h2 id="更新软件源" tabindex="-1"><a class="header-anchor" href="#更新软件源"><span>更新软件源</span></a></h2><p>顺手通过<code>cat /etc/issue</code>查看了一下wsl中安装的是最新版的Debian 13。</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" data-title="bash" style="background-color:#1E1E1E;color:#D4D4D4;"><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#DCDCAA;">sudo</span><span style="color:#CE9178;"> apt</span><span style="color:#CE9178;"> update</span><span style="color:#D4D4D4;"> &amp;&amp; </span><span style="color:#DCDCAA;">sudo</span><span style="color:#CE9178;"> apt</span><span style="color:#CE9178;"> full-upgrade</span><span style="color:#569CD6;"> -y</span></span></code></pre></div><p>前面的步骤中，安装wsl完后会弹出一个图形化配置界面，里面有自动让linux使用宿主机http代理的选项，并且该选项是默认勾选的，所以宿主机可以直接开启系统代理让wsl使用。</p><p>我是在我家主路由上安装的openclash，全自动科学，没有这种烦恼。</p><h2 id="迁移代码" tabindex="-1"><a class="header-anchor" href="#迁移代码"><span>迁移代码</span></a></h2><p>我的代码目录在宿主机的<code>D:\\Code</code>下，对应wsl中就是<code>/mnt/d/Code</code>文件夹。</p><p>虽然可以互通，但是上面也提及文件系统互通在实际开发时某些场景下特别慢。</p><p>此处给出的解决方案是：<strong>代码空间，ai agent等都放在wsl中，宿主机的Jetbrains系IDE和VS Code都通过连接本地wsl来编辑代码。</strong></p><p>因为代码项目文件有特别多，先安装rsync用于迁移文件：</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" data-title="bash" style="background-color:#1E1E1E;color:#D4D4D4;"><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#DCDCAA;">sudo</span><span style="color:#CE9178;"> apt</span><span style="color:#CE9178;"> install</span><span style="color:#CE9178;"> rsync</span></span></code></pre></div><p>宿主机的代码项目文件夹中有很多依赖文件和编译后文件，这些文件非常大，我们只需要源代码即可，环境可以之后重装，所以根据自己的项目环境写出一个exclude文件列表，然后添加到迁移命令中。我需要把宿主机D盘中的Code文件夹迁移到wsl的/code下（如果没有/code需要先新建）：</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" data-title="bash" style="background-color:#1E1E1E;color:#D4D4D4;"><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#DCDCAA;">rsync</span><span style="color:#569CD6;"> -av</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#569CD6;">  --exclude</span><span style="color:#CE9178;"> &#39;node_modules&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#569CD6;">  --exclude</span><span style="color:#CE9178;"> &#39;dist&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#569CD6;">  --exclude</span><span style="color:#CE9178;"> &#39;build&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#569CD6;">  --exclude</span><span style="color:#CE9178;"> &#39;.next&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#569CD6;">  --exclude</span><span style="color:#CE9178;"> &#39;.nuxt&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#569CD6;">  --exclude</span><span style="color:#CE9178;"> &#39;venv&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#569CD6;">  --exclude</span><span style="color:#CE9178;"> &#39;.venv&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#569CD6;">  --exclude</span><span style="color:#CE9178;"> &#39;__pycache__&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#569CD6;">  --exclude</span><span style="color:#CE9178;"> &#39;target&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#569CD6;">  --exclude</span><span style="color:#CE9178;"> &#39;.gradle&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#569CD6;">  --exclude</span><span style="color:#CE9178;"> &#39;.m2&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#CE9178;">  /mnt/d/code/</span><span style="color:#CE9178;"> /code/</span></span></code></pre></div><p>等待了几分钟即可。</p><h2 id="ide打开wsl中项目" tabindex="-1"><a class="header-anchor" href="#ide打开wsl中项目"><span>IDE打开WSL中项目</span></a></h2><h3 id="vs-code" tabindex="-1"><a class="header-anchor" href="#vs-code"><span>VS Code</span></a></h3><p>此外还需要上网学习一下VS Code、Jetbrains系IDE 打开wsl中项目的方法，VSCode集成度特别高，几乎无缝打开。直接在Start选项中选择Connect to，而后选择WSL，VSCode会自动连接本机WSL,然后打开迁移到WSL中的项目即可。</p><h3 id="jetbrains系" tabindex="-1"><a class="header-anchor" href="#jetbrains系"><span>Jetbrains系</span></a></h3><p>Jetbrains系就比较麻烦，它需要在wsl中也安装一遍IDE。<br> 在Jetbrains系的新建/打开项目的窗口中，或在左上角菜单中选择远程开发，就可以选择WSL。连接成功后，Jetbrains系就会在wsl中尝试安装一套IDE，但是由于网络原因，它自带的下载会很慢。这时候可以点击过程中版本选择下面的<code>Download Options</code>选择上传安装包或其他方式。若选择是上传安装包，则去官网下载最新安装包上传即可，当然，如果是学习版，则还要在wsl中进行激活等操作，非常麻烦。</p><p>此处推荐java项目也用vscode就可以快速解决上述问题。</p><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h2><p>挺折腾的。。。。。</p><p>安装WSL很简单，上手使用才是一个难事。</p><p>VSCode其实还好，连接非常快速，但Jetbrains需要再安装一遍IDE。</p><p>如果不想折腾的话，最简单的方式就是在windows上打开HyperV功能，安装一个带GUI的Linux发行版，直接在里面进行编码，更加顺畅。</p><p>萝卜青菜各有所爱，到底需不需要用还要看自己的使用场景。</p><p>对我来说，比如哪天线上突然出BUG，我正在打游戏，我还得去启动WSL，去等各个IDE加载，修改，推送。在Windows本地我直接打开IDE编辑代码，远程debug很快就可以解决。在WSL中的好处就是可以隔离开发环境和我自己的游戏环境。</p>`,46)]))}const r=e(t,[["render",o]]),i=JSON.parse(`{"path":"/code/move-2-wsl.html","title":"记开发环境迁移到wsl2的一次过程","lang":"zh-CN","frontmatter":{"title":"记开发环境迁移到wsl2的一次过程","isOriginal":true,"star":true,"category":["Code"],"tag":["wsl2"],"order":4,"description":"动机 最近使用Codex开发的时候，发现Codex在检索文件这一步经常报错找不到命令，而后尝试使用python读取文件内容。但是在我朋友的机器上它尝试调用python也会出现失败的情况，猜测可能是因为环境差异：我本机确实有python环境而朋友的电脑没有。 其次，安装CC和Codex时，两者都有提示推荐使用WSL2，体验效果更好。但是没有明说好在哪里。...","head":[["meta",{"property":"og:url","content":"https://jayczee.cn/code/move-2-wsl.html"}],["meta",{"property":"og:site_name","content":"Jayczee's Blog"}],["meta",{"property":"og:title","content":"记开发环境迁移到wsl2的一次过程"}],["meta",{"property":"og:description","content":"动机 最近使用Codex开发的时候，发现Codex在检索文件这一步经常报错找不到命令，而后尝试使用python读取文件内容。但是在我朋友的机器上它尝试调用python也会出现失败的情况，猜测可能是因为环境差异：我本机确实有python环境而朋友的电脑没有。 其次，安装CC和Codex时，两者都有提示推荐使用WSL2，体验效果更好。但是没有明说好在哪里。..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-12-11T02:27:29.000Z"}],["meta",{"property":"article:tag","content":"wsl2"}],["meta",{"property":"article:modified_time","content":"2025-12-11T02:27:29.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"记开发环境迁移到wsl2的一次过程\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-12-11T02:27:29.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Jayczee\\",\\"url\\":\\"https://jayczee.cn\\"}]}"]]},"headers":[{"level":2,"title":"动机","slug":"动机","link":"#动机","children":[]},{"level":2,"title":"安装WSL2","slug":"安装wsl2","link":"#安装wsl2","children":[]},{"level":2,"title":"安装过程中检索AI的一些问题","slug":"安装过程中检索ai的一些问题","link":"#安装过程中检索ai的一些问题","children":[]},{"level":2,"title":"更新软件源","slug":"更新软件源","link":"#更新软件源","children":[]},{"level":2,"title":"迁移代码","slug":"迁移代码","link":"#迁移代码","children":[]},{"level":2,"title":"IDE打开WSL中项目","slug":"ide打开wsl中项目","link":"#ide打开wsl中项目","children":[{"level":3,"title":"VS Code","slug":"vs-code","link":"#vs-code","children":[]},{"level":3,"title":"Jetbrains系","slug":"jetbrains系","link":"#jetbrains系","children":[]}]},{"level":2,"title":"总结","slug":"总结","link":"#总结","children":[]}],"git":{"createdTime":1765420049000,"updatedTime":1765420049000,"contributors":[{"name":"Jayczee","username":"Jayczee","email":"jayczee@yeah.net","commits":1,"url":"https://github.com/Jayczee"}]},"readingTime":{"minutes":5.05,"words":1515},"filePathRelative":"code/move-2-wsl.md","localizedDate":"2025年12月11日","excerpt":"<h2>动机</h2>\\n<p>最近使用Codex开发的时候，发现Codex在检索文件这一步经常报错<code>找不到命令</code>，而后尝试使用python读取文件内容。但是在我朋友的机器上它尝试调用python也会出现失败的情况，猜测可能是因为环境差异：我本机确实有python环境而朋友的电脑没有。</p>\\n<p>其次，安装CC和Codex时，两者都有提示推荐使用WSL2，体验效果更好。但是没有明说<strong>好在哪里</strong>。</p>\\n<p>在我的Mac上使用两个ai agent确实表现要更好，没有这样的提示，但无奈我的Mac是小规格，只有8G内存，无法同时开过多的项目。</p>","autoDesc":true}`);export{r as comp,i as data};
