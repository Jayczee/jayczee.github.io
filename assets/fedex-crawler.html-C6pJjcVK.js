import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as l,o as p}from"./app-D7qXrhWO.js";const e={};function o(t,s){return p(),a("div",null,s[0]||(s[0]=[l(`<h2 id="ğŸ“‚-é¡¹ç›®åœ°å€" tabindex="-1"><a class="header-anchor" href="#ğŸ“‚-é¡¹ç›®åœ°å€"><span>ğŸ“‚ é¡¹ç›®åœ°å€</span></a></h2><p><a href="https://github.com/Jayczee/fedex_tracking_bot" target="_blank" rel="noopener noreferrer">[Github]Fedex Tracking Bot</a></p><h2 id="ğŸ“š-èƒŒæ™¯" tabindex="-1"><a class="header-anchor" href="#ğŸ“š-èƒŒæ™¯"><span>ğŸ“š èƒŒæ™¯</span></a></h2><p>åœ¨æœ€è¿‘çš„å·¥ä½œä¸­ï¼Œè¿è¥éƒ¨é—¨è¦æ±‚ç¡®è®¤ä¸€äº› FedEx ç‰©æµå•å·çš„çŠ¶æ€ã€‚è™½ç„¶è‡ªå·±åœ¨è¿‡å»çš„å·¥ä½œä¸­ä¸»è¦ä¸“æ³¨äº CRUD æ“ä½œï¼Œå¹¶æ²¡æœ‰æ·±å…¥äº†è§£ç‰©æµç›¸å…³çš„å†…å®¹ï¼Œä½†è¿™æ¬¡çš„ä»»åŠ¡æ¿€å‘äº†å¯¹è¿™ä¸€é¢†åŸŸçš„æµ“åšå…´è¶£ã€‚ä¸ºäº†æ»¡è¶³éœ€æ±‚ï¼Œç»è¿‡ä¸€ç•ªæ‘¸ç´¢å’Œå®è·µï¼ŒæˆåŠŸå®ç°äº†ä¸€ä¸ªç®€å•çš„çˆ¬è™«ï¼Œæ”¶è·é¢‡ä¸°ï¼Œæ„Ÿåˆ°éå¸¸å…´å¥‹ï¼Œä¹Ÿå¸Œæœ›èƒ½ä¸å¤§å®¶åˆ†äº«ç»éªŒå¹¶å¯»æ±‚æŒ‡å¯¼ã€‚</p><h2 id="ğŸ¯-éœ€æ±‚" tabindex="-1"><a class="header-anchor" href="#ğŸ¯-éœ€æ±‚"><span>ğŸ¯ éœ€æ±‚</span></a></h2><p>æœ¬æ¬¡ä»»åŠ¡çš„ç›®æ ‡æ˜¯å¯¹ <strong>8000</strong> ä¸ªå·¦å³çš„ FedEx ç‰©æµå•å·è¿›è¡ŒçŠ¶æ€çˆ¬å–ï¼Œæ˜ç¡®åˆ¤æ–­å…¶çŠ¶æ€æ˜¯ <strong>Label Created</strong> è¿˜æ˜¯ <strong>Delivered</strong>ã€‚è¿™ä¸€è¿‡ç¨‹æ¶‰åŠåˆ°å¯¹ FedEx ç‰©æµç³»ç»Ÿçš„æ·±å…¥äº†è§£ï¼Œå°¤å…¶æ˜¯åœ¨çŠ¶æ€æŸ¥è¯¢çš„å®ç°ä¸Šã€‚</p><h2 id="ğŸ› ï¸-å°è¯•æ–¹æ¡ˆè®°å½•" tabindex="-1"><a class="header-anchor" href="#ğŸ› ï¸-å°è¯•æ–¹æ¡ˆè®°å½•"><span>ğŸ› ï¸ å°è¯•æ–¹æ¡ˆè®°å½•</span></a></h2><h3 id="_1-ä½¿ç”¨å®˜æ–¹-api" tabindex="-1"><a class="header-anchor" href="#_1-ä½¿ç”¨å®˜æ–¹-api"><span>1. ä½¿ç”¨å®˜æ–¹ API</span></a></h3><ul><li><strong>ç»“æœ</strong>ï¼šç•¥è¿‡</li><li><strong>åŸå› </strong>ï¼šç”±äºè‡ªå·±è´Ÿè´£çš„é¡¹ç›®å¹¶æœªå¯¹æ¥è¿‡ FedExï¼Œå› æ­¤éœ€è¦ç°å­¦ï¼Œå®¹æ˜“åœ¨è¿‡ç¨‹ä¸­é‡åˆ°å„ç§é—®é¢˜ã€‚ä¸è¿‡ï¼Œå¯ä»¥å‚è€ƒå…¬å¸å…¶ä»–é¡¹ç›®çš„é…ç½®ä½œä¸ºå¤‡é€‰æ–¹æ¡ˆã€‚</li></ul><h3 id="_2-ç›´æ¥è°ƒç”¨-fedex-æŸ¥è¯¢æ¥å£" tabindex="-1"><a class="header-anchor" href="#_2-ç›´æ¥è°ƒç”¨-fedex-æŸ¥è¯¢æ¥å£"><span>2. ç›´æ¥è°ƒç”¨ FedEx æŸ¥è¯¢æ¥å£</span></a></h3><ul><li><strong>ç»“æœ</strong>ï¼šå¤±è´¥</li><li><strong>åŸå› </strong>ï¼šå°è¯•ç›´æ¥è°ƒç”¨ <code>https://api.fedex.com.cn/track/v2/shipments</code> æ¥å£ï¼Œå‘ç°è¿”å›äº† 403 é”™è¯¯ã€‚å³ä¾¿æ·»åŠ äº† Cookie å’Œ User-Agent ç­‰å¿…è¦å‚æ•°ï¼Œä¾ç„¶æ— æ³•æˆåŠŸè·å–æ•°æ®ã€‚</li></ul><h3 id="_3-jsoup-è·å–é¡µé¢ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#_3-jsoup-è·å–é¡µé¢ä¿¡æ¯"><span>3. Jsoup è·å–é¡µé¢ä¿¡æ¯</span></a></h3><ul><li><strong>ç»“æœ</strong>ï¼šå¤±è´¥</li><li><strong>åŸå› </strong>ï¼šé€šè¿‡åˆ†æå‘ç°ï¼Œç‰©æµæŸ¥è¯¢é¡µé¢ä¸ºåŠ¨æ€åŠ è½½çš„é¡µé¢ï¼Œä½¿ç”¨ Jsoup è·å–çš„ HTML ä»…ä¸ºåˆå§‹é¡µé¢ï¼Œæ— æ³•è·å¾—å®é™…çš„ç‰©æµä¿¡æ¯ã€‚</li></ul><h3 id="_4-ä½¿ç”¨-selenium" tabindex="-1"><a class="header-anchor" href="#_4-ä½¿ç”¨-selenium"><span>4. ä½¿ç”¨ Selenium</span></a></h3><ul><li><strong>ç»“æœ</strong>ï¼šæˆåŠŸ</li><li><strong>åŸå› </strong>ï¼šè€ƒè™‘åˆ°é¡µé¢æ˜¯åŠ¨æ€åŠ è½½çš„ï¼Œå†³å®šä½¿ç”¨ Selenium åº“ã€‚Selenium èƒ½å¤Ÿæ¨¡æ‹ŸçœŸå®ç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­çš„æ“ä½œï¼Œè®¿é—®é¡µé¢å¹¶ç­‰å¾… JavaScript æ¸²æŸ“æ•°æ®ã€‚è™½ç„¶åŸæœ¬è®¡åˆ’ä½¿ç”¨ Java å®ç°ï¼Œä½†ç”±äºç½‘ä¸Šå¤§éƒ¨åˆ†æ–‡æ¡£å’Œæ¡ˆä¾‹éƒ½æ˜¯ç”¨ Python ç¼–å†™ï¼Œå› æ­¤æœ€ç»ˆé€‰æ‹© Python å®Œæˆä»£ç ç¼–å†™ï¼Œä¾¿äºå¿«é€Ÿå®æ–½ã€‚</li></ul><h2 id="ğŸ“Š-ç‰©æµçŠ¶æ€ä¿¡æ¯åˆ†æ" tabindex="-1"><a class="header-anchor" href="#ğŸ“Š-ç‰©æµçŠ¶æ€ä¿¡æ¯åˆ†æ"><span>ğŸ“Š ç‰©æµçŠ¶æ€ä¿¡æ¯åˆ†æ</span></a></h2><p>é€šè¿‡å¯¹é¡µé¢çš„æ·±å…¥åˆ†æï¼Œå‘ç°ç‰©æµçŠ¶æ€ç›¸å…³çš„ HTML ç»“æ„æ˜¯æœ‰è§„å¾‹å¯å¾ªçš„ï¼š</p><ul><li><strong>åŠ ç²—é»‘ä½“å­—éƒ¨åˆ†</strong>ï¼ˆå¦‚â€œå¯„ä»¶äººâ€ã€â€œæˆ‘ä»¬æ”¶åˆ°äº†æ‚¨çš„åŒ…è£¹â€ã€â€œå¤–å‡ºé€’é€â€ã€â€œå·²é€è¾¾â€ï¼‰ä½¿ç”¨ <code>class=&quot;shipment-status-progress-step-label&quot;</code> çš„ <code>&lt;span&gt;</code> æ ‡ç­¾è¿›è¡Œå±•ç¤ºã€‚</li><li><strong>æ–œä½“å°å­—éƒ¨åˆ†</strong>ï¼ˆå¦‚â€œæ ‡ç­¾å·²åˆ›å»ºâ€ã€â€œå·²é€è¾¾â€ï¼‰åˆ™ä½¿ç”¨ <code>class=&quot;shipment-status-progress-step-label-info&quot;</code> çš„ <code>&lt;span&gt;</code> æ ‡ç­¾ã€‚</li></ul><figure><img src="https://blog-1302595532.cos.ap-shanghai.myqcloud.com/blog/fedex-tracking-bot-1.png" alt="Fedexç‰©æµä¿¡æ¯æˆªå›¾" tabindex="0" loading="lazy"><figcaption>Fedexç‰©æµä¿¡æ¯æˆªå›¾</figcaption></figure><h3 id="ğŸ”-åŸºæœ¬é€»è¾‘" tabindex="-1"><a class="header-anchor" href="#ğŸ”-åŸºæœ¬é€»è¾‘"><span>ğŸ” åŸºæœ¬é€»è¾‘</span></a></h3><p>åŸºäºä»¥ä¸Šåˆ†æï¼Œçˆ¬å–ç‰©æµçŠ¶æ€çš„åŸºæœ¬é€»è¾‘å¦‚ä¸‹ï¼š</p><ol><li>ä½¿ç”¨ Selenium è®¿é—®æŒ‡å®šçš„ URLï¼Œå¹¶å°†å•å·éƒ¨åˆ†æ›¿æ¢ä¸ºå¾…æŸ¥è¯¢çš„å•å·ã€‚</li><li>ç­‰å¾…é¡µé¢åŠ è½½å®Œæˆï¼Œç¡®ä¿ä¸Šè¿° class çš„å…ƒç´ å‡ºç°åœ¨ HTML ä¸­ã€‚</li><li>å®šä½åˆ° <code>shipment-status-progress-step active</code> ä¸‹çš„çŠ¶æ€ä¿¡æ¯ï¼Œå¹¶è·å–å…¶å€¼ã€‚</li></ol><h2 id="âš ï¸-é‡åˆ°çš„é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#âš ï¸-é‡åˆ°çš„é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ"><span>âš ï¸ é‡åˆ°çš„é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ</span></a></h2><h3 id="_1-é¡µé¢æç¤º-under-construction" tabindex="-1"><a class="header-anchor" href="#_1-é¡µé¢æç¤º-under-construction"><span>1. é¡µé¢æç¤º â€œUnder Constructionâ€</span></a></h3><div class="hint-container warning"><p class="hint-container-title">æ³¨æ„</p><p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼ŒFedEx é¡µé¢ä¼šæç¤ºâ€œUnder Constructionâ€ï¼Œå¯¼è‡´æ— æ³•è·å–ä¿¡æ¯ã€‚ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œå»ºè®®åœ¨ä»£ç ä¸­åŠ å…¥é‡è¯•æœºåˆ¶ï¼Œä»¥ä¾¿åœ¨é‡åˆ°æ­¤ç±»é—®é¢˜æ—¶èƒ½å¤Ÿè‡ªåŠ¨é‡è¯•ã€‚</p></div><h3 id="_2-çˆ¬å–é€Ÿåº¦æ…¢" tabindex="-1"><a class="header-anchor" href="#_2-çˆ¬å–é€Ÿåº¦æ…¢"><span>2. çˆ¬å–é€Ÿåº¦æ…¢</span></a></h3><div class="hint-container tip"><p class="hint-container-title">æç¤º</p><p>ç”±äºæ¯ä¸ªå•å·çš„æŸ¥è¯¢éœ€è¦å¤§çº¦ 10 ç§’é’Ÿï¼Œæ•´ä½“çˆ¬å–é€Ÿåº¦è¾ƒæ…¢ã€‚ä¸ºæ­¤ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨å¤šçº¿ç¨‹æŠ€æœ¯ï¼Œå¼€å¯å¤šä¸ªçª—å£åŒæ—¶è¿›è¡Œçˆ¬å–ã€‚ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¤šå¼€ Chrome æµè§ˆå™¨ä¼šæ¶ˆè€—å¤§é‡å†…å­˜ï¼Œå»ºè®®åˆç†è®¾ç½®çº¿ç¨‹æ•°é‡ã€‚</p></div><h3 id="_3-å†…å­˜æ³„æ¼" tabindex="-1"><a class="header-anchor" href="#_3-å†…å­˜æ³„æ¼"><span>3. å†…å­˜æ³„æ¼</span></a></h3><p>åœ¨åˆæ¬¡å®ç°æ—¶ï¼Œçˆ¬å–åˆ°çš„æ•°æ®ä¼šæš‚å­˜åˆ°å†…å­˜ä¸­ï¼Œç­‰çˆ¬å–å®Œæˆåå†ä¸€æ¬¡æ€§å†™å…¥ Excel æ–‡ä»¶ã€‚ç»“æœåœ¨çˆ¬å–åˆ° 1000 ä¸ªå•å·æ—¶ï¼Œå†…å­˜å ç”¨è¿‡é«˜å¯¼è‡´ç”µè„‘å´©æºƒã€‚ç»è¿‡åå¤æµ‹è¯•ï¼Œæœ€ç»ˆå†³å®šå°†æ•°æ®åœ¨çˆ¬å–è¿‡ç¨‹ä¸­ç›´æ¥å†™å…¥æ–‡ä»¶ï¼Œå¹¶åŠ é”ä»¥é¿å…å¹¶å‘é—®é¢˜ã€‚</p><h3 id="_4-è®¿é—®é¢‘ç‡è¿‡é«˜è¢«å±è”½" tabindex="-1"><a class="header-anchor" href="#_4-è®¿é—®é¢‘ç‡è¿‡é«˜è¢«å±è”½"><span>4. è®¿é—®é¢‘ç‡è¿‡é«˜è¢«å±è”½</span></a></h3><div class="hint-container tip"><p class="hint-container-title">æç¤º</p><p>åœ¨è¿›è¡Œå¤§é‡æŸ¥è¯¢æ—¶ï¼Œé¢‘ç¹è®¿é—®ä¼šå¯¼è‡´è¢« FedEx å±è”½ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ä»£ç†æ± ï¼Œé€šè¿‡å®é™…æµ‹è¯•å‘ç°ï¼Œå½“æŸ¥è¯¢æ¬¡æ•°è¶…è¿‡ 100 æ¬¡æ—¶ï¼Œä¾¿ä¼šè¢«æš‚æ—¶ç¦æ­¢è®¿é—®ã€‚å¯ä»¥è€ƒè™‘ä½¿ç”¨è‡ªå·±çš„ä»£ç†èŠ‚ç‚¹ï¼Œå€ŸåŠ©å·¥å…·å°†å…¶è½¬ä¸ºä»£ç†æ± ï¼Œä»¥å‡åŒ€åˆ†é…è®¿é—®è¯·æ±‚ã€‚</p></div><h2 id="ğŸ“-ç»“è®º" tabindex="-1"><a class="header-anchor" href="#ğŸ“-ç»“è®º"><span>ğŸ“ ç»“è®º</span></a></h2><p>é€šè¿‡æ­¤æ¬¡å®è·µï¼ŒæˆåŠŸå®ç°äº†å¯¹ FedEx ç‰©æµå•å·çŠ¶æ€çš„çˆ¬å–ï¼Œç§¯ç´¯äº†å®è´µçš„ç»éªŒå’Œæ•™è®­ã€‚å°½ç®¡åœ¨è¿‡ç¨‹ä¸­é‡åˆ°äº†ä¸€äº›æŒ‘æˆ˜ï¼Œä½†æœ€ç»ˆéƒ½ä¸€ä¸€å…‹æœã€‚å¸Œæœ›èƒ½ä¸å„ä½å‰è¾ˆåˆ†äº«ç»éªŒï¼Œæ¬¢è¿è¿›è¡ŒæŒ‡å¯¼å’Œè®¨è®ºã€‚</p><h2 id="ğŸ“š-å‚è€ƒèµ„æº" tabindex="-1"><a class="header-anchor" href="#ğŸ“š-å‚è€ƒèµ„æº"><span>ğŸ“š å‚è€ƒèµ„æº</span></a></h2><ul><li><a href="https://github.com/Rain-kl/glider_guid" target="_blank" rel="noopener noreferrer">Glider Guide</a> - è¯¥å·¥å…·å¯ä»¥å°†è‡ªå·±çš„ä»£ç†èŠ‚ç‚¹è½¬ä¸ºä»£ç†æ± ï¼Œå¸®åŠ©æ›´å¥½åœ°ç®¡ç†è¯·æ±‚ã€‚</li></ul><h2 id="ğŸ“·-æ•ˆæœå›¾" tabindex="-1"><a class="header-anchor" href="#ğŸ“·-æ•ˆæœå›¾"><span>ğŸ“· æ•ˆæœå›¾</span></a></h2><figure><img src="https://blog-1302595532.cos.ap-shanghai.myqcloud.com/blog/fedex-tracking-bot-2.png" alt="çˆ¬å–ç»“æœ" tabindex="0" loading="lazy"><figcaption>çˆ¬å–ç»“æœ</figcaption></figure><h2 id="ğŸ’»-æœ€ç»ˆä»£ç " tabindex="-1"><a class="header-anchor" href="#ğŸ’»-æœ€ç»ˆä»£ç "><span>ğŸ’» æœ€ç»ˆä»£ç </span></a></h2><div class="language-python" data-highlighter="shiki" data-ext="python" data-title="python" style="background-color:#1E1E1E;color:#D4D4D4;"><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> pandas </span><span style="color:#C586C0;">as</span><span style="color:#D4D4D4;"> pd</span></span>
<span class="line"><span style="color:#C586C0;">from</span><span style="color:#D4D4D4;"> bs4 </span><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> BeautifulSoup</span></span>
<span class="line"><span style="color:#C586C0;">from</span><span style="color:#D4D4D4;"> selenium </span><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> webdriver</span></span>
<span class="line"><span style="color:#C586C0;">from</span><span style="color:#D4D4D4;"> selenium.webdriver.chrome.service </span><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> Service</span></span>
<span class="line"><span style="color:#C586C0;">from</span><span style="color:#D4D4D4;"> selenium.webdriver.common.by </span><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> By</span></span>
<span class="line"><span style="color:#C586C0;">from</span><span style="color:#D4D4D4;"> selenium.webdriver.support.ui </span><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> WebDriverWait</span></span>
<span class="line"><span style="color:#C586C0;">from</span><span style="color:#D4D4D4;"> selenium.webdriver.support </span><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> expected_conditions </span><span style="color:#C586C0;">as</span><span style="color:#D4D4D4;"> EC</span></span>
<span class="line"><span style="color:#C586C0;">from</span><span style="color:#D4D4D4;"> selenium.webdriver.chrome.options </span><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> Options</span></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> time</span></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> concurrent.futures</span></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> logging</span></span>
<span class="line"><span style="color:#C586C0;">from</span><span style="color:#D4D4D4;"> datetime </span><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> datetime</span></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> threading</span></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> os</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># è®¾ç½®æ—¥å¿—é…ç½®</span></span>
<span class="line"><span style="color:#D4D4D4;">logging.basicConfig(</span><span style="color:#9CDCFE;">level</span><span style="color:#D4D4D4;">=logging.INFO, </span><span style="color:#9CDCFE;">format</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&#39;</span><span style="color:#569CD6;">%(asctime)s</span><span style="color:#CE9178;"> - </span><span style="color:#569CD6;">%(levelname)s</span><span style="color:#CE9178;"> - </span><span style="color:#569CD6;">%(message)s</span><span style="color:#CE9178;">&#39;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">logger = logging.getLogger()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># è¯»å– input.xlsx ä¸­çš„æ‰€æœ‰æ•°æ®</span></span>
<span class="line"><span style="color:#D4D4D4;">df = pd.read_excel(</span><span style="color:#CE9178;">&#39;input.xlsx&#39;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># è·å–å·²çˆ¬å–çš„å•å·</span></span>
<span class="line"><span style="color:#D4D4D4;">processed_numbers = </span><span style="color:#4EC9B0;">set</span><span style="color:#D4D4D4;">()</span></span>
<span class="line"><span style="color:#C586C0;">for</span><span style="color:#D4D4D4;"> file </span><span style="color:#C586C0;">in</span><span style="color:#D4D4D4;"> os.listdir(</span><span style="color:#CE9178;">&#39;.&#39;</span><span style="color:#D4D4D4;">):</span></span>
<span class="line"><span style="color:#C586C0;">    if</span><span style="color:#D4D4D4;"> file.startswith(</span><span style="color:#CE9178;">&#39;tracking_results&#39;</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">and</span><span style="color:#D4D4D4;"> file.endswith(</span><span style="color:#CE9178;">&#39;.xlsx&#39;</span><span style="color:#D4D4D4;">):</span></span>
<span class="line"><span style="color:#D4D4D4;">        logger.info(</span><span style="color:#569CD6;">f</span><span style="color:#CE9178;">&quot;æ–‡ä»¶åï¼š</span><span style="color:#569CD6;">{</span><span style="color:#D4D4D4;">file.split(</span><span style="color:#CE9178;">&#39;.&#39;</span><span style="color:#D4D4D4;">)[</span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">]</span><span style="color:#569CD6;">}</span><span style="color:#CE9178;">&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">        processed_df = pd.read_excel(file)</span></span>
<span class="line"><span style="color:#D4D4D4;">        existed_list = processed_df[</span><span style="color:#CE9178;">&#39;tracking&#39;</span><span style="color:#D4D4D4;">].tolist()</span></span>
<span class="line"><span style="color:#D4D4D4;">        logger.info(</span><span style="color:#569CD6;">f</span><span style="color:#CE9178;">&quot;å­˜åœ¨å·²çˆ¬å–å•å·</span><span style="color:#569CD6;">{</span><span style="color:#DCDCAA;">len</span><span style="color:#D4D4D4;">(existed_list)</span><span style="color:#569CD6;">}</span><span style="color:#CE9178;">ä¸ª&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">        logger.info(</span><span style="color:#569CD6;">f</span><span style="color:#CE9178;">&quot;æ·»åŠ å‰å·²å­˜åœ¨</span><span style="color:#569CD6;">{</span><span style="color:#DCDCAA;">len</span><span style="color:#D4D4D4;">(processed_numbers)</span><span style="color:#569CD6;">}</span><span style="color:#CE9178;">ä¸ª&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">        processed_numbers.update(existed_list)</span></span>
<span class="line"><span style="color:#D4D4D4;">        logger.info(</span><span style="color:#569CD6;">f</span><span style="color:#CE9178;">&quot;æ·»åŠ åå·²å­˜åœ¨</span><span style="color:#569CD6;">{</span><span style="color:#DCDCAA;">len</span><span style="color:#D4D4D4;">(processed_numbers)</span><span style="color:#569CD6;">}</span><span style="color:#CE9178;">ä¸ª&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># å°†æœªçˆ¬å–çš„ ref_number åˆ—çš„æ•°æ®å­˜å…¥ list_ ä¸­</span></span>
<span class="line"><span style="color:#D4D4D4;">list_ = [num </span><span style="color:#C586C0;">for</span><span style="color:#D4D4D4;"> num </span><span style="color:#C586C0;">in</span><span style="color:#D4D4D4;"> df[</span><span style="color:#CE9178;">&#39;ref_number&#39;</span><span style="color:#D4D4D4;">].tolist() </span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> num </span><span style="color:#569CD6;">not</span><span style="color:#569CD6;"> in</span><span style="color:#D4D4D4;"> processed_numbers]</span></span>
<span class="line"><span style="color:#D4D4D4;">total_count = </span><span style="color:#DCDCAA;">len</span><span style="color:#D4D4D4;">(list_)  </span><span style="color:#6A9955;"># æ€»æ•°é‡</span></span>
<span class="line"><span style="color:#D4D4D4;">logger.info(</span><span style="color:#569CD6;">f</span><span style="color:#CE9178;">&quot;éœ€è¦çˆ¬å–çš„æ€»æ•°é‡: </span><span style="color:#569CD6;">{</span><span style="color:#D4D4D4;">total_count</span><span style="color:#569CD6;">}</span><span style="color:#CE9178;">&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># è®¾ç½® ChromeOptions</span></span>
<span class="line"><span style="color:#D4D4D4;">chrome_options = Options()</span></span>
<span class="line"><span style="color:#D4D4D4;">chrome_options.add_argument(</span><span style="color:#CE9178;">&#39;--proxy-server=socks5://127.0.0.1:8443&#39;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">chrome_options.add_argument(</span><span style="color:#CE9178;">&#39;--disable-gpu&#39;</span><span style="color:#D4D4D4;">)  </span><span style="color:#6A9955;"># ç¦ç”¨ GPU åŠ é€Ÿ</span></span>
<span class="line"><span style="color:#D4D4D4;">chrome_options.add_argument(</span><span style="color:#CE9178;">&#39;--no-sandbox&#39;</span><span style="color:#D4D4D4;">)  </span><span style="color:#6A9955;"># è§£å†³ DevToolsActivePort æ–‡ä»¶ä¸å­˜åœ¨çš„é”™è¯¯</span></span>
<span class="line"><span style="color:#D4D4D4;">chrome_options.add_argument(</span><span style="color:#CE9178;">&#39;--disable-dev-shm-usage&#39;</span><span style="color:#D4D4D4;">)  </span><span style="color:#6A9955;"># å…±äº«å†…å­˜ä¸è¶³çš„é—®é¢˜</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># åˆ›å»ºé”</span></span>
<span class="line"><span style="color:#D4D4D4;">lock = threading.Lock()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># æ‰¾åˆ°ä¸‹ä¸€ä¸ª tracking_resultsN.xlsx æ–‡ä»¶å</span></span>
<span class="line"><span style="color:#D4D4D4;">file_index = </span><span style="color:#B5CEA8;">1</span></span>
<span class="line"><span style="color:#C586C0;">while</span><span style="color:#D4D4D4;"> os.path.exists(</span><span style="color:#569CD6;">f</span><span style="color:#CE9178;">&#39;tracking_results</span><span style="color:#569CD6;">{</span><span style="color:#D4D4D4;">file_index</span><span style="color:#569CD6;">}</span><span style="color:#CE9178;">.xlsx&#39;</span><span style="color:#D4D4D4;">):</span></span>
<span class="line"><span style="color:#D4D4D4;">    file_index += </span><span style="color:#B5CEA8;">1</span></span>
<span class="line"><span style="color:#D4D4D4;">output_file = </span><span style="color:#569CD6;">f</span><span style="color:#CE9178;">&#39;tracking_results</span><span style="color:#569CD6;">{</span><span style="color:#D4D4D4;">file_index</span><span style="color:#569CD6;">}</span><span style="color:#CE9178;">.xlsx&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># å®šä¹‰ä¸€ä¸ªå‡½æ•°æ¥å¤„ç†æ¯ä¸ªå•å·</span></span>
<span class="line"><span style="color:#569CD6;">def</span><span style="color:#DCDCAA;"> fetch_tracking_info</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">num</span><span style="color:#D4D4D4;">):</span></span>
<span class="line"><span style="color:#D4D4D4;">    driver = </span><span style="color:#569CD6;">None</span></span>
<span class="line"><span style="color:#D4D4D4;">    retries = </span><span style="color:#B5CEA8;">3</span><span style="color:#6A9955;">  # è®¾ç½®é‡è¯•æ¬¡æ•°</span></span>
<span class="line"><span style="color:#C586C0;">    for</span><span style="color:#D4D4D4;"> attempt </span><span style="color:#C586C0;">in</span><span style="color:#DCDCAA;"> range</span><span style="color:#D4D4D4;">(retries):</span></span>
<span class="line"><span style="color:#C586C0;">        try</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">            logger.info(</span><span style="color:#569CD6;">f</span><span style="color:#CE9178;">&quot;å¼€å§‹å¤„ç†å•å·: </span><span style="color:#569CD6;">{</span><span style="color:#D4D4D4;">num</span><span style="color:#569CD6;">}</span><span style="color:#CE9178;">, å°è¯•æ¬¡æ•°: </span><span style="color:#569CD6;">{</span><span style="color:#D4D4D4;">attempt + </span><span style="color:#B5CEA8;">1</span><span style="color:#569CD6;">}</span><span style="color:#CE9178;">&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">            driver = webdriver.Chrome(</span><span style="color:#9CDCFE;">service</span><span style="color:#D4D4D4;">=Service(</span><span style="color:#CE9178;">&#39;./chromedriver.exe&#39;</span><span style="color:#D4D4D4;">), </span><span style="color:#9CDCFE;">options</span><span style="color:#D4D4D4;">=chrome_options)</span></span>
<span class="line"><span style="color:#D4D4D4;">            driver.execute_cdp_cmd(</span><span style="color:#CE9178;">&quot;Page.addScriptToEvaluateOnNewDocument&quot;</span><span style="color:#D4D4D4;">, {</span></span>
<span class="line"><span style="color:#CE9178;">                &quot;source&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#CE9178;">                Object.defineProperty(navigator, &#39;webdriver&#39;, {</span></span>
<span class="line"><span style="color:#CE9178;">                  get: () =&gt; undefined</span></span>
<span class="line"><span style="color:#CE9178;">                })</span></span>
<span class="line"><span style="color:#CE9178;">              &quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">            })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">            driver.get(</span><span style="color:#569CD6;">f</span><span style="color:#CE9178;">&quot;https://www.fedex.com.cn/fedextrack/?trknbr=</span><span style="color:#569CD6;">{</span><span style="color:#D4D4D4;">num</span><span style="color:#569CD6;">}</span><span style="color:#CE9178;">&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;">            # ç­‰å¾… shipment-status-progress-step-label å‡ºç°å¹¶ä¸”æœ‰å€¼</span></span>
<span class="line"><span style="color:#C586C0;">            try</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">                WebDriverWait(driver, </span><span style="color:#B5CEA8;">15</span><span style="color:#D4D4D4;">).until(</span></span>
<span class="line"><span style="color:#D4D4D4;">                    EC.presence_of_element_located((By.CLASS_NAME, </span><span style="color:#CE9178;">&#39;shipment-status-progress-step-label-info&#39;</span><span style="color:#D4D4D4;">))</span></span>
<span class="line"><span style="color:#D4D4D4;">                )</span></span>
<span class="line"><span style="color:#D4D4D4;">                time.sleep(</span><span style="color:#B5CEA8;">2</span><span style="color:#D4D4D4;">)  </span><span style="color:#6A9955;"># ç¡®ä¿é¡µé¢åŠ è½½å®Œæˆ</span></span>
<span class="line"><span style="color:#D4D4D4;">                x = driver.page_source</span></span>
<span class="line"><span style="color:#D4D4D4;">                html = BeautifulSoup(x, </span><span style="color:#CE9178;">&quot;html.parser&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">                active_step = html.find(</span><span style="color:#CE9178;">&#39;div&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">class_</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&#39;shipment-status-progress-step active&#39;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">                label_value = </span><span style="color:#569CD6;">None</span></span>
<span class="line"><span style="color:#C586C0;">                if</span><span style="color:#D4D4D4;"> active_step:</span></span>
<span class="line"><span style="color:#D4D4D4;">                    label_span = active_step.find(</span><span style="color:#CE9178;">&#39;span&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">class_</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&#39;shipment-status-progress-step-label-info&#39;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#C586C0;">                    if</span><span style="color:#D4D4D4;"> label_span </span><span style="color:#569CD6;">and</span><span style="color:#D4D4D4;"> label_span.get_text(</span><span style="color:#9CDCFE;">strip</span><span style="color:#D4D4D4;">=</span><span style="color:#569CD6;">True</span><span style="color:#D4D4D4;">):</span></span>
<span class="line"><span style="color:#D4D4D4;">                        label_value = label_span.get_text(</span><span style="color:#9CDCFE;">strip</span><span style="color:#D4D4D4;">=</span><span style="color:#569CD6;">True</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0;">                if</span><span style="color:#D4D4D4;"> label_value:</span></span>
<span class="line"><span style="color:#D4D4D4;">                    logger.info(</span><span style="color:#569CD6;">f</span><span style="color:#CE9178;">&quot;å®Œæˆå¤„ç†å•å·: </span><span style="color:#569CD6;">{</span><span style="color:#D4D4D4;">num</span><span style="color:#569CD6;">}</span><span style="color:#CE9178;">, çŠ¶æ€: </span><span style="color:#569CD6;">{</span><span style="color:#D4D4D4;">label_value</span><span style="color:#569CD6;">}</span><span style="color:#CE9178;">&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#6A9955;">                    # ä½¿ç”¨é”æ¥ç¡®ä¿çº¿ç¨‹å®‰å…¨å†™å…¥Excelæ–‡ä»¶</span></span>
<span class="line"><span style="color:#C586C0;">                    with</span><span style="color:#D4D4D4;"> lock:</span></span>
<span class="line"><span style="color:#C586C0;">                        if</span><span style="color:#D4D4D4;"> os.path.exists(output_file):</span></span>
<span class="line"><span style="color:#D4D4D4;">                            existing_df = pd.read_excel(output_file)</span></span>
<span class="line"><span style="color:#D4D4D4;">                            new_df = pd.DataFrame([[num, label_value]], </span><span style="color:#9CDCFE;">columns</span><span style="color:#D4D4D4;">=[</span><span style="color:#CE9178;">&#39;tracking&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;label_value&#39;</span><span style="color:#D4D4D4;">], </span><span style="color:#9CDCFE;">dtype</span><span style="color:#D4D4D4;">=</span><span style="color:#4EC9B0;">str</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">                            result_df = pd.concat([existing_df, new_df], </span><span style="color:#9CDCFE;">ignore_index</span><span style="color:#D4D4D4;">=</span><span style="color:#569CD6;">True</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#C586C0;">                        else</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">                            result_df = pd.DataFrame([[num, label_value]], </span><span style="color:#9CDCFE;">columns</span><span style="color:#D4D4D4;">=[</span><span style="color:#CE9178;">&#39;tracking&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;label_value&#39;</span><span style="color:#D4D4D4;">], </span><span style="color:#9CDCFE;">dtype</span><span style="color:#D4D4D4;">=</span><span style="color:#4EC9B0;">str</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">                        result_df.to_excel(output_file, </span><span style="color:#9CDCFE;">index</span><span style="color:#D4D4D4;">=</span><span style="color:#569CD6;">False</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#C586C0;">                    return</span><span style="color:#D4D4D4;"> num, label_value</span></span>
<span class="line"><span style="color:#C586C0;">                else</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#C586C0;">                    raise</span><span style="color:#4EC9B0;"> Exception</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;çŠ¶æ€æ ‡ç­¾æ²¡æœ‰å€¼&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#C586C0;">            except</span><span style="color:#4EC9B0;"> Exception</span><span style="color:#C586C0;"> as</span><span style="color:#D4D4D4;"> e:</span></span>
<span class="line"><span style="color:#D4D4D4;">                logger.warning(</span><span style="color:#569CD6;">f</span><span style="color:#CE9178;">&quot;å•å· </span><span style="color:#569CD6;">{</span><span style="color:#D4D4D4;">num</span><span style="color:#569CD6;">}</span><span style="color:#CE9178;"> çŠ¶æ€æ ‡ç­¾æœªæ‰¾åˆ°æˆ–æ— å€¼&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#C586C0;">                if</span><span style="color:#D4D4D4;"> attempt &lt; retries - </span><span style="color:#B5CEA8;">1</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">                    logger.info(</span><span style="color:#569CD6;">f</span><span style="color:#CE9178;">&quot;é‡è¯•å•å·: </span><span style="color:#569CD6;">{</span><span style="color:#D4D4D4;">num</span><span style="color:#569CD6;">}</span><span style="color:#CE9178;">, å°è¯•æ¬¡æ•°: </span><span style="color:#569CD6;">{</span><span style="color:#D4D4D4;">attempt + </span><span style="color:#B5CEA8;">2</span><span style="color:#569CD6;">}</span><span style="color:#CE9178;">&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#C586C0;">                else</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">                    logger.error(</span><span style="color:#569CD6;">f</span><span style="color:#CE9178;">&quot;å•å· </span><span style="color:#569CD6;">{</span><span style="color:#D4D4D4;">num</span><span style="color:#569CD6;">}</span><span style="color:#CE9178;"> å¤„ç†å¤±è´¥ï¼Œå·²è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#C586C0;">                continue</span><span style="color:#6A9955;">  # ç»§ç»­é‡è¯•</span></span>
<span class="line"><span style="color:#C586C0;">        except</span><span style="color:#4EC9B0;"> Exception</span><span style="color:#C586C0;"> as</span><span style="color:#D4D4D4;"> e:</span></span>
<span class="line"><span style="color:#D4D4D4;">            logger.error(</span><span style="color:#569CD6;">f</span><span style="color:#CE9178;">&quot;å¤„ç†å•å· </span><span style="color:#569CD6;">{</span><span style="color:#D4D4D4;">num</span><span style="color:#569CD6;">}</span><span style="color:#CE9178;"> æ—¶å‘ç”Ÿé”™è¯¯: </span><span style="color:#569CD6;">{</span><span style="color:#D4D4D4;">e</span><span style="color:#569CD6;">}</span><span style="color:#CE9178;">&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#C586C0;">        finally</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#C586C0;">            if</span><span style="color:#D4D4D4;"> driver:</span></span>
<span class="line"><span style="color:#D4D4D4;">                driver.quit()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;">    # åœ¨è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°åï¼Œè®°å½•å¤±è´¥çš„ç»“æœ</span></span>
<span class="line"><span style="color:#C586C0;">    with</span><span style="color:#D4D4D4;"> lock:</span></span>
<span class="line"><span style="color:#C586C0;">        if</span><span style="color:#D4D4D4;"> os.path.exists(output_file):</span></span>
<span class="line"><span style="color:#D4D4D4;">            existing_df = pd.read_excel(output_file)   </span></span>
<span class="line"><span style="color:#D4D4D4;">            new_df = pd.DataFrame([[num, </span><span style="color:#CE9178;">&#39;Unknown&#39;</span><span style="color:#D4D4D4;">]], </span><span style="color:#9CDCFE;">columns</span><span style="color:#D4D4D4;">=[</span><span style="color:#CE9178;">&#39;tracking&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;label_value&#39;</span><span style="color:#D4D4D4;">], </span><span style="color:#9CDCFE;">dtype</span><span style="color:#D4D4D4;">=</span><span style="color:#4EC9B0;">str</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">            result_df = pd.concat([existing_df, new_df], </span><span style="color:#9CDCFE;">ignore_index</span><span style="color:#D4D4D4;">=</span><span style="color:#569CD6;">True</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#C586C0;">        else</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">            result_df = pd.DataFrame([[num, </span><span style="color:#CE9178;">&#39;Unknown&#39;</span><span style="color:#D4D4D4;">]], </span><span style="color:#9CDCFE;">columns</span><span style="color:#D4D4D4;">=[</span><span style="color:#CE9178;">&#39;tracking&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;label_value&#39;</span><span style="color:#D4D4D4;">], </span><span style="color:#9CDCFE;">dtype</span><span style="color:#D4D4D4;">=</span><span style="color:#4EC9B0;">str</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">        result_df.to_excel(output_file, </span><span style="color:#9CDCFE;">index</span><span style="color:#D4D4D4;">=</span><span style="color:#569CD6;">False</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#C586C0;">    return</span><span style="color:#D4D4D4;"> num, </span><span style="color:#569CD6;">None</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># è®°å½•å¼€å§‹æ—¶é—´</span></span>
<span class="line"><span style="color:#D4D4D4;">start_time = datetime.now()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># ä½¿ç”¨ ThreadPoolExecutor æ¥å¹¶è¡Œå¤„ç†</span></span>
<span class="line"><span style="color:#C586C0;">with</span><span style="color:#D4D4D4;"> concurrent.futures.ThreadPoolExecutor(</span><span style="color:#9CDCFE;">max_workers</span><span style="color:#D4D4D4;">=</span><span style="color:#B5CEA8;">15</span><span style="color:#D4D4D4;">) </span><span style="color:#C586C0;">as</span><span style="color:#D4D4D4;"> executor:</span></span>
<span class="line"><span style="color:#D4D4D4;">    future_to_num = {executor.submit(fetch_tracking_info, num): num </span><span style="color:#C586C0;">for</span><span style="color:#D4D4D4;"> num </span><span style="color:#C586C0;">in</span><span style="color:#D4D4D4;"> list_}</span></span>
<span class="line"><span style="color:#C586C0;">    for</span><span style="color:#D4D4D4;"> future </span><span style="color:#C586C0;">in</span><span style="color:#D4D4D4;"> concurrent.futures.as_completed(future_to_num):</span></span>
<span class="line"><span style="color:#D4D4D4;">        tracking_num, label_value = future.result()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># è®°å½•ç»“æŸæ—¶é—´</span></span>
<span class="line"><span style="color:#D4D4D4;">end_time = datetime.now()</span></span>
<span class="line"><span style="color:#6A9955;"># è®¡ç®—è¿è¡Œæ—¶é•¿</span></span>
<span class="line"><span style="color:#D4D4D4;">duration = end_time - start_time</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># è¾“å‡ºè¿è¡Œæ—¶é•¿</span></span>
<span class="line"><span style="color:#D4D4D4;">hours, remainder = </span><span style="color:#DCDCAA;">divmod</span><span style="color:#D4D4D4;">(duration.total_seconds(), </span><span style="color:#B5CEA8;">3600</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">minutes, seconds = </span><span style="color:#DCDCAA;">divmod</span><span style="color:#D4D4D4;">(remainder, </span><span style="color:#B5CEA8;">60</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">logger.info(</span><span style="color:#569CD6;">f</span><span style="color:#CE9178;">&quot;ç¨‹åºè¿è¡Œæ—¶é—´: </span><span style="color:#569CD6;">{</span><span style="color:#4EC9B0;">int</span><span style="color:#D4D4D4;">(hours)</span><span style="color:#569CD6;">}</span><span style="color:#CE9178;">æ—¶ </span><span style="color:#569CD6;">{</span><span style="color:#4EC9B0;">int</span><span style="color:#D4D4D4;">(minutes)</span><span style="color:#569CD6;">}</span><span style="color:#CE9178;">åˆ† </span><span style="color:#569CD6;">{</span><span style="color:#4EC9B0;">int</span><span style="color:#D4D4D4;">(seconds)</span><span style="color:#569CD6;">}</span><span style="color:#CE9178;">ç§’&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">logger.info(</span><span style="color:#CE9178;">&quot;æ‰€æœ‰å•å·å¤„ç†å®Œæˆ&quot;</span><span style="color:#D4D4D4;">)</span></span></code></pre></div><h3 id="ä»£ç è¯´æ˜" tabindex="-1"><a class="header-anchor" href="#ä»£ç è¯´æ˜"><span>ä»£ç è¯´æ˜</span></a></h3><ul><li><strong>æ—¥å¿—è®°å½•</strong>ï¼šä½¿ç”¨ <code>logging</code> æ¨¡å—è®°å½•ç¨‹åºçš„è¿è¡ŒçŠ¶æ€ï¼Œä¾¿äºè°ƒè¯•å’Œè·Ÿè¸ªã€‚</li><li><strong>æ•°æ®è¯»å–ä¸å†™å…¥</strong>ï¼šä½¿ç”¨ <code>pandas</code> è¯»å–è¾“å…¥çš„ Excel æ–‡ä»¶ï¼Œå¹¶åœ¨çˆ¬å–è¿‡ç¨‹ä¸­å°†ç»“æœå†™å…¥æ–°çš„ Excel æ–‡ä»¶ã€‚</li><li><strong>Selenium æ“ä½œ</strong>ï¼šé€šè¿‡ Selenium æ¨¡æ‹Ÿç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­çš„æ“ä½œï¼Œè·å–åŠ¨æ€åŠ è½½çš„ç‰©æµçŠ¶æ€ä¿¡æ¯ã€‚</li><li><strong>å¤šçº¿ç¨‹å¤„ç†</strong>ï¼šä½¿ç”¨ <code>ThreadPoolExecutor</code> å®ç°å¤šçº¿ç¨‹çˆ¬å–ï¼Œæé«˜çˆ¬å–æ•ˆç‡ã€‚</li><li><strong>å¼‚å¸¸å¤„ç†ä¸é‡è¯•æœºåˆ¶</strong>ï¼šåœ¨é‡åˆ°é”™è¯¯æ—¶è¿›è¡Œé‡è¯•ï¼Œç¡®ä¿ç¨‹åºçš„å¥å£®æ€§ã€‚</li></ul><p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ä¸ä»£ç å®ç°ï¼ŒæˆåŠŸçˆ¬å–äº† FedEx ç‰©æµå•å·çš„çŠ¶æ€ä¿¡æ¯ï¼Œä¸ºè¿è¥éƒ¨é—¨æä¾›äº†æ‰€éœ€çš„æ•°æ®æ”¯æŒã€‚å¸Œæœ›è¿™ä»½ç»éªŒèƒ½å¸®åŠ©åˆ°æ›´å¤šæœ‰ç±»ä¼¼éœ€æ±‚çš„æœ‹å‹ä»¬ï¼</p>`,42)]))}const D=n(e,[["render",o]]),i=JSON.parse(`{"path":"/code/fedex-crawler.html","title":"ğŸ“¦ Fedexç‰©æµå•å·çŠ¶æ€çˆ¬å–","lang":"zh-CN","frontmatter":{"title":"ğŸ“¦ Fedexç‰©æµå•å·çŠ¶æ€çˆ¬å–","isOriginal":true,"star":true,"category":["Code"],"tag":["çˆ¬è™«","fedex","python"],"order":1,"description":"ğŸ“‚ é¡¹ç›®åœ°å€ [Github]Fedex Tracking Bot ğŸ“š èƒŒæ™¯ åœ¨æœ€è¿‘çš„å·¥ä½œä¸­ï¼Œè¿è¥éƒ¨é—¨è¦æ±‚ç¡®è®¤ä¸€äº› FedEx ç‰©æµå•å·çš„çŠ¶æ€ã€‚è™½ç„¶è‡ªå·±åœ¨è¿‡å»çš„å·¥ä½œä¸­ä¸»è¦ä¸“æ³¨äº CRUD æ“ä½œï¼Œå¹¶æ²¡æœ‰æ·±å…¥äº†è§£ç‰©æµç›¸å…³çš„å†…å®¹ï¼Œä½†è¿™æ¬¡çš„ä»»åŠ¡æ¿€å‘äº†å¯¹è¿™ä¸€é¢†åŸŸçš„æµ“åšå…´è¶£ã€‚ä¸ºäº†æ»¡è¶³éœ€æ±‚ï¼Œç»è¿‡ä¸€ç•ªæ‘¸ç´¢å’Œå®è·µï¼ŒæˆåŠŸå®ç°äº†ä¸€ä¸ªç®€å•çš„çˆ¬è™«ï¼Œæ”¶è·é¢‡ä¸°ï¼Œæ„Ÿåˆ°éå¸¸å…´å¥‹ï¼Œä¹Ÿ...","head":[["meta",{"property":"og:url","content":"https://jayczee.cn/code/fedex-crawler.html"}],["meta",{"property":"og:site_name","content":"Jayczee's Blog"}],["meta",{"property":"og:title","content":"ğŸ“¦ Fedexç‰©æµå•å·çŠ¶æ€çˆ¬å–"}],["meta",{"property":"og:description","content":"ğŸ“‚ é¡¹ç›®åœ°å€ [Github]Fedex Tracking Bot ğŸ“š èƒŒæ™¯ åœ¨æœ€è¿‘çš„å·¥ä½œä¸­ï¼Œè¿è¥éƒ¨é—¨è¦æ±‚ç¡®è®¤ä¸€äº› FedEx ç‰©æµå•å·çš„çŠ¶æ€ã€‚è™½ç„¶è‡ªå·±åœ¨è¿‡å»çš„å·¥ä½œä¸­ä¸»è¦ä¸“æ³¨äº CRUD æ“ä½œï¼Œå¹¶æ²¡æœ‰æ·±å…¥äº†è§£ç‰©æµç›¸å…³çš„å†…å®¹ï¼Œä½†è¿™æ¬¡çš„ä»»åŠ¡æ¿€å‘äº†å¯¹è¿™ä¸€é¢†åŸŸçš„æµ“åšå…´è¶£ã€‚ä¸ºäº†æ»¡è¶³éœ€æ±‚ï¼Œç»è¿‡ä¸€ç•ªæ‘¸ç´¢å’Œå®è·µï¼ŒæˆåŠŸå®ç°äº†ä¸€ä¸ªç®€å•çš„çˆ¬è™«ï¼Œæ”¶è·é¢‡ä¸°ï¼Œæ„Ÿåˆ°éå¸¸å…´å¥‹ï¼Œä¹Ÿ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://blog-1302595532.cos.ap-shanghai.myqcloud.com/blog/fedex-tracking-bot-1.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-06-24T09:00:57.000Z"}],["meta",{"property":"article:tag","content":"çˆ¬è™«"}],["meta",{"property":"article:tag","content":"fedex"}],["meta",{"property":"article:tag","content":"python"}],["meta",{"property":"article:modified_time","content":"2025-06-24T09:00:57.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"ğŸ“¦ Fedexç‰©æµå•å·çŠ¶æ€çˆ¬å–\\",\\"image\\":[\\"https://blog-1302595532.cos.ap-shanghai.myqcloud.com/blog/fedex-tracking-bot-1.png\\",\\"https://blog-1302595532.cos.ap-shanghai.myqcloud.com/blog/fedex-tracking-bot-2.png\\"],\\"dateModified\\":\\"2025-06-24T09:00:57.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Jayczee\\",\\"url\\":\\"https://jayczee.cn\\"}]}"]]},"headers":[{"level":2,"title":"ğŸ“‚ é¡¹ç›®åœ°å€","slug":"ğŸ“‚-é¡¹ç›®åœ°å€","link":"#ğŸ“‚-é¡¹ç›®åœ°å€","children":[]},{"level":2,"title":"ğŸ“š èƒŒæ™¯","slug":"ğŸ“š-èƒŒæ™¯","link":"#ğŸ“š-èƒŒæ™¯","children":[]},{"level":2,"title":"ğŸ¯ éœ€æ±‚","slug":"ğŸ¯-éœ€æ±‚","link":"#ğŸ¯-éœ€æ±‚","children":[]},{"level":2,"title":"ğŸ› ï¸ å°è¯•æ–¹æ¡ˆè®°å½•","slug":"ğŸ› ï¸-å°è¯•æ–¹æ¡ˆè®°å½•","link":"#ğŸ› ï¸-å°è¯•æ–¹æ¡ˆè®°å½•","children":[{"level":3,"title":"1. ä½¿ç”¨å®˜æ–¹ API","slug":"_1-ä½¿ç”¨å®˜æ–¹-api","link":"#_1-ä½¿ç”¨å®˜æ–¹-api","children":[]},{"level":3,"title":"2. ç›´æ¥è°ƒç”¨ FedEx æŸ¥è¯¢æ¥å£","slug":"_2-ç›´æ¥è°ƒç”¨-fedex-æŸ¥è¯¢æ¥å£","link":"#_2-ç›´æ¥è°ƒç”¨-fedex-æŸ¥è¯¢æ¥å£","children":[]},{"level":3,"title":"3. Jsoup è·å–é¡µé¢ä¿¡æ¯","slug":"_3-jsoup-è·å–é¡µé¢ä¿¡æ¯","link":"#_3-jsoup-è·å–é¡µé¢ä¿¡æ¯","children":[]},{"level":3,"title":"4. ä½¿ç”¨ Selenium","slug":"_4-ä½¿ç”¨-selenium","link":"#_4-ä½¿ç”¨-selenium","children":[]}]},{"level":2,"title":"ğŸ“Š ç‰©æµçŠ¶æ€ä¿¡æ¯åˆ†æ","slug":"ğŸ“Š-ç‰©æµçŠ¶æ€ä¿¡æ¯åˆ†æ","link":"#ğŸ“Š-ç‰©æµçŠ¶æ€ä¿¡æ¯åˆ†æ","children":[{"level":3,"title":"ğŸ” åŸºæœ¬é€»è¾‘","slug":"ğŸ”-åŸºæœ¬é€»è¾‘","link":"#ğŸ”-åŸºæœ¬é€»è¾‘","children":[]}]},{"level":2,"title":"âš ï¸ é‡åˆ°çš„é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ","slug":"âš ï¸-é‡åˆ°çš„é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ","link":"#âš ï¸-é‡åˆ°çš„é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ","children":[{"level":3,"title":"1. é¡µé¢æç¤º â€œUnder Constructionâ€","slug":"_1-é¡µé¢æç¤º-under-construction","link":"#_1-é¡µé¢æç¤º-under-construction","children":[]},{"level":3,"title":"2. çˆ¬å–é€Ÿåº¦æ…¢","slug":"_2-çˆ¬å–é€Ÿåº¦æ…¢","link":"#_2-çˆ¬å–é€Ÿåº¦æ…¢","children":[]},{"level":3,"title":"3. å†…å­˜æ³„æ¼","slug":"_3-å†…å­˜æ³„æ¼","link":"#_3-å†…å­˜æ³„æ¼","children":[]},{"level":3,"title":"4. è®¿é—®é¢‘ç‡è¿‡é«˜è¢«å±è”½","slug":"_4-è®¿é—®é¢‘ç‡è¿‡é«˜è¢«å±è”½","link":"#_4-è®¿é—®é¢‘ç‡è¿‡é«˜è¢«å±è”½","children":[]}]},{"level":2,"title":"ğŸ“ ç»“è®º","slug":"ğŸ“-ç»“è®º","link":"#ğŸ“-ç»“è®º","children":[]},{"level":2,"title":"ğŸ“š å‚è€ƒèµ„æº","slug":"ğŸ“š-å‚è€ƒèµ„æº","link":"#ğŸ“š-å‚è€ƒèµ„æº","children":[]},{"level":2,"title":"ğŸ“· æ•ˆæœå›¾","slug":"ğŸ“·-æ•ˆæœå›¾","link":"#ğŸ“·-æ•ˆæœå›¾","children":[]},{"level":2,"title":"ğŸ’» æœ€ç»ˆä»£ç ","slug":"ğŸ’»-æœ€ç»ˆä»£ç ","link":"#ğŸ’»-æœ€ç»ˆä»£ç ","children":[{"level":3,"title":"ä»£ç è¯´æ˜","slug":"ä»£ç è¯´æ˜","link":"#ä»£ç è¯´æ˜","children":[]}]}],"git":{"createdTime":1736761506000,"updatedTime":1750755657000,"contributors":[{"name":"Jayczee","username":"Jayczee","email":"jayczee@yeah.net","commits":6,"url":"https://github.com/Jayczee"}]},"readingTime":{"minutes":7.24,"words":2171},"filePathRelative":"code/fedex-crawler.md","localizedDate":"2025å¹´1æœˆ13æ—¥","excerpt":"<h2>ğŸ“‚ é¡¹ç›®åœ°å€</h2>\\n<p><a href=\\"https://github.com/Jayczee/fedex_tracking_bot\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">[Github]Fedex Tracking Bot</a></p>\\n<h2>ğŸ“š èƒŒæ™¯</h2>\\n<p>åœ¨æœ€è¿‘çš„å·¥ä½œä¸­ï¼Œè¿è¥éƒ¨é—¨è¦æ±‚ç¡®è®¤ä¸€äº› FedEx ç‰©æµå•å·çš„çŠ¶æ€ã€‚è™½ç„¶è‡ªå·±åœ¨è¿‡å»çš„å·¥ä½œä¸­ä¸»è¦ä¸“æ³¨äº CRUD æ“ä½œï¼Œå¹¶æ²¡æœ‰æ·±å…¥äº†è§£ç‰©æµç›¸å…³çš„å†…å®¹ï¼Œä½†è¿™æ¬¡çš„ä»»åŠ¡æ¿€å‘äº†å¯¹è¿™ä¸€é¢†åŸŸçš„æµ“åšå…´è¶£ã€‚ä¸ºäº†æ»¡è¶³éœ€æ±‚ï¼Œç»è¿‡ä¸€ç•ªæ‘¸ç´¢å’Œå®è·µï¼ŒæˆåŠŸå®ç°äº†ä¸€ä¸ªç®€å•çš„çˆ¬è™«ï¼Œæ”¶è·é¢‡ä¸°ï¼Œæ„Ÿåˆ°éå¸¸å…´å¥‹ï¼Œä¹Ÿå¸Œæœ›èƒ½ä¸å¤§å®¶åˆ†äº«ç»éªŒå¹¶å¯»æ±‚æŒ‡å¯¼ã€‚</p>","autoDesc":true}`);export{D as comp,i as data};
