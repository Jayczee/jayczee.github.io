import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as l,o as p}from"./app-zkxKMUJO.js";const e={};function o(t,s){return p(),a("div",null,s[0]||(s[0]=[l(`<h2 id="背景" tabindex="-1"><a class="header-anchor" href="#背景"><span>背景</span></a></h2><p>在项目中，客户在操作出库时需要上传或购买面单。当通过自家系统购买时，API会向Fedex、UPS等物流服务商请求面单，返回的单号将与订单绑定，便于后续管理。然而，当客户从其他地方购买面单并下载为图片格式的PDF时，无法直接获取单号。</p><h2 id="思路" tabindex="-1"><a class="header-anchor" href="#思路"><span>思路</span></a></h2><p>面单上包含条码信息，通过扫描条码可获取单号、地址等相关信息。</p><h2 id="问题点" tabindex="-1"><a class="header-anchor" href="#问题点"><span>问题点</span></a></h2><ol><li><p><strong>条码干扰信息</strong><br> 面单上可能包含多个条码，直接扫描时获取的字符串会包含大量干扰信息。<br><strong>解决方案：</strong> 在扫描条码前，根据条码位置截取面单条码所在区域，并放大图片，以提高扫描结果的准确性。</p></li><li><p><strong>条码位置不一致</strong><br> 不同服务的面单条码位置各异。<br><strong>解决方案：</strong> 需针对不同面单条码位置进行判断，逐一排除。Fedex面单相对稳定，条码通常位于面单底部，识别率接近100%。而UPS的不同服务条码位置差异较大，需要进行更多判断。</p></li></ol><h2 id="代码实现" tabindex="-1"><a class="header-anchor" href="#代码实现"><span>代码实现</span></a></h2><p>以下是读取Fedex面单PDF中物流单号的Java代码示例：</p><div class="language-java" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#1E1E1E;color:#D4D4D4;"><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#569CD6;">public</span><span style="color:#569CD6;"> static</span><span style="color:#4EC9B0;"> List</span><span style="color:#D4D4D4;">&lt;String&gt; </span><span style="color:#DCDCAA;">readTrackingNumbers</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">File</span><span style="color:#D4D4D4;"> pdfFile) {</span></span>
<span class="line"><span style="color:#569CD6;">    final</span><span style="color:#4EC9B0;"> List</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;">&gt; </span><span style="color:#9CDCFE;">res</span><span style="color:#D4D4D4;"> = </span><span style="color:#C586C0;">new</span><span style="color:#4EC9B0;"> ArrayList</span><span style="color:#D4D4D4;">&lt;&gt;();</span></span>
<span class="line"><span style="color:#C586C0;">    try</span><span style="color:#D4D4D4;"> (</span><span style="color:#569CD6;">final</span><span style="color:#4EC9B0;"> PDDocument</span><span style="color:#9CDCFE;"> document</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">PDDocument</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">load</span><span style="color:#D4D4D4;">(pdfFile)) {</span></span>
<span class="line"><span style="color:#569CD6;">        final</span><span style="color:#4EC9B0;"> PDFRenderer</span><span style="color:#9CDCFE;"> renderer</span><span style="color:#D4D4D4;"> = </span><span style="color:#C586C0;">new</span><span style="color:#DCDCAA;"> PDFRenderer</span><span style="color:#D4D4D4;">(document);</span></span>
<span class="line"><span style="color:#C586C0;">        for</span><span style="color:#D4D4D4;"> (</span><span style="color:#4EC9B0;">int</span><span style="color:#9CDCFE;"> pageIndex</span><span style="color:#D4D4D4;"> = </span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">; pageIndex &lt; </span><span style="color:#9CDCFE;">document</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getNumberOfPages</span><span style="color:#D4D4D4;">(); pageIndex++) {</span></span>
<span class="line"><span style="color:#C586C0;">            if</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">document</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getPage</span><span style="color:#D4D4D4;">(pageIndex).</span><span style="color:#DCDCAA;">getMediaBox</span><span style="color:#D4D4D4;">().</span><span style="color:#DCDCAA;">getWidth</span><span style="color:#D4D4D4;">() &gt; </span><span style="color:#9CDCFE;">document</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getPage</span><span style="color:#D4D4D4;">(</span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">).</span><span style="color:#DCDCAA;">getMediaBox</span><span style="color:#D4D4D4;">().</span><span style="color:#DCDCAA;">getHeight</span><span style="color:#D4D4D4;">()) {</span></span>
<span class="line"><span style="color:#9CDCFE;">                document</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getPage</span><span style="color:#D4D4D4;">(pageIndex).</span><span style="color:#DCDCAA;">setRotation</span><span style="color:#D4D4D4;">(</span><span style="color:#B5CEA8;">90</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">            }</span></span>
<span class="line"><span style="color:#4EC9B0;">            BufferedImage</span><span style="color:#9CDCFE;"> image</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">renderer</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">renderImageWithDPI</span><span style="color:#D4D4D4;">(pageIndex, </span><span style="color:#B5CEA8;">300</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#4EC9B0;">            int</span><span style="color:#9CDCFE;"> width</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#4EC9B0;">            int</span><span style="color:#9CDCFE;"> height</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#4EC9B0;">            BinaryBitmap</span><span style="color:#9CDCFE;"> bitmap</span><span style="color:#D4D4D4;"> = </span><span style="color:#C586C0;">new</span><span style="color:#DCDCAA;"> BinaryBitmap</span><span style="color:#D4D4D4;">(</span><span style="color:#C586C0;">new</span><span style="color:#DCDCAA;"> HybridBinarizer</span><span style="color:#D4D4D4;">(</span><span style="color:#C586C0;">new</span><span style="color:#DCDCAA;"> BufferedImageLuminanceSource</span><span style="color:#D4D4D4;">(image)));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4EC9B0;">            Result</span><span style="color:#9CDCFE;"> result</span><span style="color:#D4D4D4;"> = </span><span style="color:#C586C0;">new</span><span style="color:#DCDCAA;"> MultiFormatReader</span><span style="color:#D4D4D4;">().</span><span style="color:#DCDCAA;">decode</span><span style="color:#D4D4D4;">(bitmap);</span></span>
<span class="line"><span style="color:#4EC9B0;">            String</span><span style="color:#9CDCFE;"> resultText</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">result</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getText</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">            width = </span><span style="color:#9CDCFE;">image</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getWidth</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">            height = </span><span style="color:#9CDCFE;">image</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getHeight</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0;">            if</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">resultText</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">length</span><span style="color:#D4D4D4;">() &gt; </span><span style="color:#B5CEA8;">60</span><span style="color:#D4D4D4;"> || </span><span style="color:#9CDCFE;">resultText</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">startsWith</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;9621&quot;</span><span style="color:#D4D4D4;">)) {</span></span>
<span class="line"><span style="color:#6A9955;">                // Fedex面单：扫描结果包含冗余信息，若以9621开头则为Fedex SmartPost，需扫描下面的条码</span></span>
<span class="line"><span style="color:#D4D4D4;">                image = </span><span style="color:#9CDCFE;">image</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getSubimage</span><span style="color:#D4D4D4;">(</span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">, (</span><span style="color:#4EC9B0;">int</span><span style="color:#D4D4D4;">) (height * </span><span style="color:#B5CEA8;">0.6</span><span style="color:#D4D4D4;">), width, (</span><span style="color:#4EC9B0;">int</span><span style="color:#D4D4D4;">) (height * </span><span style="color:#B5CEA8;">0.4</span><span style="color:#D4D4D4;">));</span></span>
<span class="line"><span style="color:#D4D4D4;">                bitmap = </span><span style="color:#C586C0;">new</span><span style="color:#DCDCAA;"> BinaryBitmap</span><span style="color:#D4D4D4;">(</span><span style="color:#C586C0;">new</span><span style="color:#DCDCAA;"> HybridBinarizer</span><span style="color:#D4D4D4;">(</span><span style="color:#C586C0;">new</span><span style="color:#DCDCAA;"> BufferedImageLuminanceSource</span><span style="color:#D4D4D4;">(image)));</span></span>
<span class="line"><span style="color:#D4D4D4;">            } </span><span style="color:#C586C0;">else</span><span style="color:#C586C0;"> if</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">resultText</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">length</span><span style="color:#D4D4D4;">() &lt; </span><span style="color:#B5CEA8;">10</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#6A9955;">                // UPS Ground面单：面单快递条码之前还有一个短条码</span></span>
<span class="line"><span style="color:#D4D4D4;">                image = </span><span style="color:#9CDCFE;">image</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getSubimage</span><span style="color:#D4D4D4;">(</span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">, (</span><span style="color:#4EC9B0;">int</span><span style="color:#D4D4D4;">) (height * </span><span style="color:#B5CEA8;">0.6</span><span style="color:#D4D4D4;">), width, (</span><span style="color:#4EC9B0;">int</span><span style="color:#D4D4D4;">) (height * </span><span style="color:#B5CEA8;">0.4</span><span style="color:#D4D4D4;">));</span></span>
<span class="line"><span style="color:#D4D4D4;">                bitmap = </span><span style="color:#C586C0;">new</span><span style="color:#DCDCAA;"> BinaryBitmap</span><span style="color:#D4D4D4;">(</span><span style="color:#C586C0;">new</span><span style="color:#DCDCAA;"> HybridBinarizer</span><span style="color:#D4D4D4;">(</span><span style="color:#C586C0;">new</span><span style="color:#DCDCAA;"> BufferedImageLuminanceSource</span><span style="color:#D4D4D4;">(image)));</span></span>
<span class="line"><span style="color:#D4D4D4;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">            result = </span><span style="color:#C586C0;">new</span><span style="color:#DCDCAA;"> MultiFormatReader</span><span style="color:#D4D4D4;">().</span><span style="color:#DCDCAA;">decode</span><span style="color:#D4D4D4;">(bitmap);</span></span>
<span class="line"><span style="color:#D4D4D4;">            resultText = </span><span style="color:#9CDCFE;">result</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getText</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#9CDCFE;">            res</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">add</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">resultText</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">toUpperCase</span><span style="color:#D4D4D4;">());</span></span>
<span class="line"><span style="color:#D4D4D4;">        }</span></span>
<span class="line"><span style="color:#D4D4D4;">    } </span><span style="color:#C586C0;">catch</span><span style="color:#D4D4D4;"> (</span><span style="color:#4EC9B0;">IOException</span><span style="color:#D4D4D4;"> | </span><span style="color:#4EC9B0;">NotFoundException</span><span style="color:#9CDCFE;"> e</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#9CDCFE;">        e</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">printStackTrace</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#C586C0;">    return</span><span style="color:#D4D4D4;"> res;</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span></code></pre></div>`,9)]))}const c=n(e,[["render",o]]),y=JSON.parse(`{"path":"/code/label-trk-reader.html","title":"📦 Fedex / UPS 面单PDF中读取物流单号","lang":"zh-CN","frontmatter":{"title":"📦 Fedex / UPS 面单PDF中读取物流单号","isOriginal":true,"star":true,"category":["Code"],"tag":["java","fedex"],"order":2,"description":"背景 在项目中，客户在操作出库时需要上传或购买面单。当通过自家系统购买时，API会向Fedex、UPS等物流服务商请求面单，返回的单号将与订单绑定，便于后续管理。然而，当客户从其他地方购买面单并下载为图片格式的PDF时，无法直接获取单号。 思路 面单上包含条码信息，通过扫描条码可获取单号、地址等相关信息。 问题点 条码干扰信息 面单上可能包含多个条码，...","head":[["meta",{"property":"og:url","content":"https://jayczee.cn/code/label-trk-reader.html"}],["meta",{"property":"og:site_name","content":"Jayczee's Blog"}],["meta",{"property":"og:title","content":"📦 Fedex / UPS 面单PDF中读取物流单号"}],["meta",{"property":"og:description","content":"背景 在项目中，客户在操作出库时需要上传或购买面单。当通过自家系统购买时，API会向Fedex、UPS等物流服务商请求面单，返回的单号将与订单绑定，便于后续管理。然而，当客户从其他地方购买面单并下载为图片格式的PDF时，无法直接获取单号。 思路 面单上包含条码信息，通过扫描条码可获取单号、地址等相关信息。 问题点 条码干扰信息 面单上可能包含多个条码，..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-06-24T09:00:57.000Z"}],["meta",{"property":"article:tag","content":"java"}],["meta",{"property":"article:tag","content":"fedex"}],["meta",{"property":"article:modified_time","content":"2025-06-24T09:00:57.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"📦 Fedex / UPS 面单PDF中读取物流单号\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-06-24T09:00:57.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Jayczee\\",\\"url\\":\\"https://jayczee.cn\\"}]}"]]},"headers":[{"level":2,"title":"背景","slug":"背景","link":"#背景","children":[]},{"level":2,"title":"思路","slug":"思路","link":"#思路","children":[]},{"level":2,"title":"问题点","slug":"问题点","link":"#问题点","children":[]},{"level":2,"title":"代码实现","slug":"代码实现","link":"#代码实现","children":[]}],"git":{"createdTime":1741574209000,"updatedTime":1750755657000,"contributors":[{"name":"Jayczee","username":"Jayczee","email":"jayczee@yeah.net","commits":3,"url":"https://github.com/Jayczee"}]},"readingTime":{"minutes":1.79,"words":538},"filePathRelative":"code/label-trk-reader.md","localizedDate":"2025年3月10日","excerpt":"<h2>背景</h2>\\n<p>在项目中，客户在操作出库时需要上传或购买面单。当通过自家系统购买时，API会向Fedex、UPS等物流服务商请求面单，返回的单号将与订单绑定，便于后续管理。然而，当客户从其他地方购买面单并下载为图片格式的PDF时，无法直接获取单号。</p>\\n<h2>思路</h2>\\n<p>面单上包含条码信息，通过扫描条码可获取单号、地址等相关信息。</p>\\n<h2>问题点</h2>\\n<ol>\\n<li>\\n<p><strong>条码干扰信息</strong><br>\\n面单上可能包含多个条码，直接扫描时获取的字符串会包含大量干扰信息。<br>\\n<strong>解决方案：</strong> 在扫描条码前，根据条码位置截取面单条码所在区域，并放大图片，以提高扫描结果的准确性。</p>\\n</li>\\n<li>\\n<p><strong>条码位置不一致</strong><br>\\n不同服务的面单条码位置各异。<br>\\n<strong>解决方案：</strong> 需针对不同面单条码位置进行判断，逐一排除。Fedex面单相对稳定，条码通常位于面单底部，识别率接近100%。而UPS的不同服务条码位置差异较大，需要进行更多判断。</p>\\n</li>\\n</ol>","autoDesc":true}`);export{c as comp,y as data};
